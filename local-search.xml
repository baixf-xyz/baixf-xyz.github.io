<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>玩转树莓派[06USB摄像头和motion实现监控]</title>
    <link href="/2020/07/13/%E7%8E%A9%E8%BD%AC%E6%A0%91%E8%8E%93%E6%B4%BE%5B06USB%E6%91%84%E5%83%8F%E5%A4%B4%E5%92%8Cmotion%E5%AE%9E%E7%8E%B0%E7%9B%91%E6%8E%A7%5D/"/>
    <url>/2020/07/13/%E7%8E%A9%E8%BD%AC%E6%A0%91%E8%8E%93%E6%B4%BE%5B06USB%E6%91%84%E5%83%8F%E5%A4%B4%E5%92%8Cmotion%E5%AE%9E%E7%8E%B0%E7%9B%91%E6%8E%A7%5D/</url>
    
    <content type="html"><![CDATA[<p><span class="label label-primary"><br>  这篇文章主要为大家详细介绍了树莓派使用USB摄像头和motion实现监控，具有一定的参考价值，感兴趣的小伙伴们可以参考一下。</span></p><p>本文实例为大家分享了树莓派使用USB摄像头和motion实现监控的具体代码，供大家参考，具体内容如下</p><h4 id="一、工具"><a href="#一、工具" class="headerlink" title="一、工具"></a>一、工具</h4><p>1、树莓派<br>2、USB摄像头</p><h4 id="二、操作步骤"><a href="#二、操作步骤" class="headerlink" title="二、操作步骤"></a>二、操作步骤</h4><h5 id="0、连接并测试USB摄像头"><a href="#0、连接并测试USB摄像头" class="headerlink" title="0、连接并测试USB摄像头"></a>0、连接并测试USB摄像头</h5><p>树莓派接USB摄像头十分简单，毕竟树莓派是Linux系统的卡片电脑，将买来的USB摄像头直接连在树莓派的USB口上，然后我们看看摄像头是否被识别，有两种方法：</p><pre><code class="hljs shell">1. 使用lsusb命令pi@raspbian:~$ lsusbBus 002 Device 001: ID 1d6b:0003 Linux Foundation 3.0 root hubBus 001 Device 003: ID 1871:0101 Aveo Technology Corp. UVC camera (Bresser microscope)Bus 001 Device 002: ID 2109:3431 VIA Labs, Inc. HubBus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub</code></pre><p>SSH终端会显示树莓派当前接入的USB设备列表，我们可以先不插摄像头，lsusb，然后插上摄像头lsusb，就可以看到USB摄像头对应的是哪个设备了。</p><pre><code class="hljs shell">2. 查看设备文件也可以查看设备文件，输入命令：pi@raspbian:~$ ls /dev/video*/dev/video0  /dev/video1  /dev/video10  /dev/video11  /dev/video12  /dev/video13  /dev/video14  /dev/video15  /dev/video16</code></pre><pre><code class="hljs shell">3、本人实测摄像画面。安装mplayer，终端运行：sudo apt-get install mplayersudo mplayer tv://</code></pre><p><span class="label label-primary">注意事项：须在安装vnc桌面情况下查看⚠</span></p><p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/20201122214638.png" alt=""></p><h5 id="1、安装motion"><a href="#1、安装motion" class="headerlink" title="1、安装motion"></a>1、安装motion</h5><pre><code class="hljs shell">sudo apt-get install motion</code></pre><h5 id="2、配置motion"><a href="#2、配置motion" class="headerlink" title="2、配置motion"></a>2、配置motion</h5><p>(1)让motion可以一直在后台运行</p><pre><code class="hljs shell">sudo nano /etc/default/motion</code></pre><p>将里面的no修改成yes，让motion可以一直在后台运行：start_motion_daemon=yes</p><p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/20201122214717.jpg" alt=""></p><p>(2)修改其他配置</p><pre><code class="hljs shell">一些常见参数：daemon on                        #开启守护进程（选配）target_dir /home/pi/motion-images    #图片保存的路径<span class="hljs-meta">#</span><span class="bash">videodevice /dev/video0            <span class="hljs-comment">#摄像头设备（默认）可修改            </span></span>stream_localhost off                 #允许通过网页查看摄像头stream_auth_method 2               #开启密码认证stream_authentication 用户名:密码    #网页查看摄像头的用户名和密码</code></pre><p>具体修改如下：</p><pre><code class="hljs shell">sudo nano /etc/motion/motion.conf</code></pre><p>修改配置文件，这个文件比较长，请确保一下参数的配置。在nano编辑器下，可以使用^w快速查找到如下配置内容。也可以使用^v向下翻页。</p><h5 id="开启终端启动和后台模式"><a href="#开启终端启动和后台模式" class="headerlink" title="开启终端启动和后台模式"></a>开启终端启动和后台模式</h5><p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/20201122214900.jpg" alt=""></p><h5 id="网页端口"><a href="#网页端口" class="headerlink" title="网页端口"></a>网页端口</h5><p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/20201122214917.jpg" alt=""></p><h5 id="监控宽度高度"><a href="#监控宽度高度" class="headerlink" title="监控宽度高度"></a>监控宽度高度</h5><p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/20201122214933.jpg" alt=""></p><p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/20201122214948.jpg" alt=""></p><p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/20201122215002.jpg" alt=""></p><h5 id="3、启动motion"><a href="#3、启动motion" class="headerlink" title="3、启动motion"></a>3、启动motion</h5><pre><code class="hljs shell">sudo motion</code></pre><h5 id="4、查看视频数据"><a href="#4、查看视频数据" class="headerlink" title="4、查看视频数据"></a>4、查看视频数据</h5><p>在局域网内的设备，不管是手机还是电脑，均可打开浏览器访问树莓派IP:8081</p><p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/20201122215035.png" alt=""></p><h5 id="5、退出motion"><a href="#5、退出motion" class="headerlink" title="5、退出motion"></a>5、退出motion</h5><pre><code class="hljs shell">killall -TERM motion</code></pre><p>或者</p><pre><code class="hljs shell">service motion stop</code></pre><h5 id="6、-设置为开机运行（选配）"><a href="#6、-设置为开机运行（选配）" class="headerlink" title="6、 设置为开机运行（选配）"></a>6、 设置为开机运行（选配）</h5><pre><code class="hljs shell">sudo vim /etc/rc.local</code></pre><p>在exit 0前添加 motion , 保存，就会开机自动运行了。</p><h4 id="附件一-motion-conf"><a href="#附件一-motion-conf" class="headerlink" title="附件一 motion.conf"></a>附件一 motion.conf</h4><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> Rename this distribution example file to motion.conf</span><span class="hljs-meta">#</span><span class="hljs-meta">#</span><span class="bash"> This config file was generated by motion 4.1.1</span><span class="hljs-meta">#</span><span class="bash"> Documentation:  /usr/share/doc/motion/motion_guide.html</span><span class="hljs-meta">#</span><span class="bash"><span class="hljs-comment">###########################################################</span></span><span class="hljs-meta">#</span><span class="bash"> Daemon</span><span class="hljs-meta">#</span><span class="bash"><span class="hljs-comment">###########################################################</span></span><span class="hljs-meta">#</span><span class="bash"> Start <span class="hljs-keyword">in</span> daemon (background) mode and release terminal (default: off)</span>daemon on<span class="hljs-meta">#</span><span class="bash"> File to store the process ID, also called pid file. (default: not defined)</span>process_id_file /var/run/motion/motion.pid<span class="hljs-meta">#</span><span class="bash"><span class="hljs-comment">###########################################################</span></span><span class="hljs-meta">#</span><span class="bash"> Basic Setup Mode</span><span class="hljs-meta">#</span><span class="bash"><span class="hljs-comment">###########################################################</span></span><span class="hljs-meta">#</span><span class="bash"> Start <span class="hljs-keyword">in</span> Setup-Mode, daemon disabled. (default: off)</span>setup_mode off<span class="hljs-meta">#</span><span class="bash"> Use a file to save logs messages, <span class="hljs-keyword">if</span> not defined stderr and syslog is used. (default: not defined)</span>logfile /var/log/motion/motion.log<span class="hljs-meta">#</span><span class="bash"> Level of <span class="hljs-built_in">log</span> messages [1..9] (EMG, ALR, CRT, ERR, WRN, NTC, INF, DBG, ALL). (default: 6 / NTC)</span>log_level 6<span class="hljs-meta">#</span><span class="bash"> Filter to <span class="hljs-built_in">log</span> messages by <span class="hljs-built_in">type</span> (COR, STR, ENC, NET, DBL, EVT, TRK, VID, ALL). (default: ALL)</span>log_type all<span class="hljs-meta">#</span><span class="bash"><span class="hljs-comment">##########################################################</span></span><span class="hljs-meta">#</span><span class="bash"> Capture device options</span><span class="hljs-meta">#</span><span class="bash"><span class="hljs-comment">###########################################################</span></span><span class="hljs-meta">#</span><span class="bash"> Videodevice to be used <span class="hljs-keyword">for</span> capturing  (default /dev/video0)</span><span class="hljs-meta">#</span><span class="bash"> <span class="hljs-keyword">for</span> FreeBSD default is /dev/bktr0</span>videodevice /dev/video0<span class="hljs-meta">#</span><span class="bash"> v4l2_palette allows one to choose preferable palette to be use by motion</span><span class="hljs-meta">#</span><span class="bash"> See motion_guide.html <span class="hljs-keyword">for</span> the valid options and values.  (default: 17)</span>v4l2_palette 17<span class="hljs-meta">#</span><span class="bash"> Tuner device to be used <span class="hljs-keyword">for</span> capturing using tuner as <span class="hljs-built_in">source</span> (default /dev/tuner0)</span><span class="hljs-meta">#</span><span class="bash"> This is ONLY used <span class="hljs-keyword">for</span> FreeBSD. Leave it commented out <span class="hljs-keyword">for</span> Linux</span>; tunerdevice /dev/tuner0<span class="hljs-meta">#</span><span class="bash"> The video input to be used (default: -1)</span><span class="hljs-meta">#</span><span class="bash"> Should normally be <span class="hljs-built_in">set</span> to 0 or 1 <span class="hljs-keyword">for</span> video/TV cards, and -1 <span class="hljs-keyword">for</span> USB cameras</span><span class="hljs-meta">#</span><span class="bash"> Set to 0 <span class="hljs-keyword">for</span> uvideo(4) on OpenBSD</span>input -1<span class="hljs-meta">#</span><span class="bash"> The video norm to use (only <span class="hljs-keyword">for</span> video capture and TV tuner cards)</span><span class="hljs-meta">#</span><span class="bash"> Values: 0 (PAL), 1 (NTSC), 2 (SECAM), 3 (PAL NC no colour). Default: 0 (PAL)</span>norm 0<span class="hljs-meta">#</span><span class="bash"> The frequency to <span class="hljs-built_in">set</span> the tuner to (kHz) (only <span class="hljs-keyword">for</span> TV tuner cards) (default: 0)</span>frequency 0<span class="hljs-meta">#</span><span class="bash"> Override the power line frequency <span class="hljs-keyword">for</span> the webcam. (normally not necessary)</span><span class="hljs-meta">#</span><span class="bash"> Values:</span><span class="hljs-meta">#</span><span class="bash"> -1 : Do not modify device setting</span><span class="hljs-meta">#</span><span class="bash"> 0  : Power line frequency Disabled</span><span class="hljs-meta">#</span><span class="bash"> 1  : 50hz</span><span class="hljs-meta">#</span><span class="bash"> 2  : 60hz</span><span class="hljs-meta">#</span><span class="bash"> 3  : Auto</span>power_line_frequency -1<span class="hljs-meta">#</span><span class="bash"> Rotate image this number of degrees. The rotation affects all saved images as</span><span class="hljs-meta">#</span><span class="bash"> well as movies. Valid values: 0 (default = no rotation), 90, 180 and 270.</span>rotate 0<span class="hljs-meta">#</span><span class="bash"> Flip image over a given axis (vertical or horizontal), vertical means from left to right</span><span class="hljs-meta">#</span><span class="bash"> horizontal means top to bottom. Valid values: none, v and h.</span>flip_axis none<span class="hljs-meta">#</span><span class="bash"> Image width (pixels). Valid range: Camera dependent, default: 320</span>width 800<span class="hljs-meta">#</span><span class="bash"> Image height (pixels). Valid range: Camera dependent, default: 240</span>height 600<span class="hljs-meta">#</span><span class="bash"> Maximum number of frames to be captured per second.</span><span class="hljs-meta">#</span><span class="bash"> Valid range: 2-100. Default: 100 (almost no <span class="hljs-built_in">limit</span>).</span>framerate 2<span class="hljs-meta">#</span><span class="bash"> Minimum time <span class="hljs-keyword">in</span> seconds between capturing picture frames from the camera.</span><span class="hljs-meta">#</span><span class="bash"> Default: 0 = disabled - the capture rate is given by the camera framerate.</span><span class="hljs-meta">#</span><span class="bash"> This option is used when you want to capture images at a rate lower than 2 per second.</span>minimum_frame_time 0<span class="hljs-meta">#</span><span class="bash"> Full Network Camera URL.  Valid Services: http:// ftp:// mjpg:// rtsp:// mjpeg:// file:// rtmp://</span>; netcam_url value<span class="hljs-meta">#</span><span class="bash"> Username and password <span class="hljs-keyword">for</span> network camera <span class="hljs-keyword">if</span> required. Syntax is user:password</span>; netcam_userpass value<span class="hljs-meta">#</span><span class="bash"> The setting <span class="hljs-keyword">for</span> keep-alive of network socket, should improve performance on compatible net cameras.</span><span class="hljs-meta">#</span><span class="bash"> off:   The historical implementation using HTTP/1.0, closing the socket after each http request.</span><span class="hljs-meta">#</span><span class="bash"> force: Use HTTP/1.0 requests with keep alive header to reuse the same connection.</span><span class="hljs-meta">#</span><span class="bash"> on:    Use HTTP/1.1 requests that support keep alive as default.</span><span class="hljs-meta">#</span><span class="bash"> Default: off</span>netcam_keepalive off<span class="hljs-meta">#</span><span class="bash"> URL to use <span class="hljs-keyword">for</span> a netcam proxy server, <span class="hljs-keyword">if</span> required, e.g. <span class="hljs-string">&quot;http://myproxy&quot;</span>.</span><span class="hljs-meta">#</span><span class="bash"> If a port number other than 80 is needed, use <span class="hljs-string">&quot;http://myproxy:1234&quot;</span>.</span><span class="hljs-meta">#</span><span class="bash"> Default: not defined</span>; netcam_proxy value<span class="hljs-meta">#</span><span class="bash"> Set less strict jpeg checks <span class="hljs-keyword">for</span> network cameras with a poor/buggy firmware.</span><span class="hljs-meta">#</span><span class="bash"> Default: off</span>netcam_tolerant_check off<span class="hljs-meta">#</span><span class="bash"> RTSP connection uses TCP to communicate to the camera. Can prevent image corruption.</span><span class="hljs-meta">#</span><span class="bash"> Default: on</span>rtsp_uses_tcp on<span class="hljs-meta">#</span><span class="bash"> Name of camera to use <span class="hljs-keyword">if</span> you are using a camera accessed through OpenMax/MMAL</span><span class="hljs-meta">#</span><span class="bash"> Default: Not defined</span>; mmalcam_name vc.ril.camera<span class="hljs-meta">#</span><span class="bash"> Camera control parameters (see raspivid/raspistill tool documentation)</span><span class="hljs-meta">#</span><span class="bash"> Default: Not defined</span>; mmalcam_control_params -hf<span class="hljs-meta">#</span><span class="bash"> Let motion regulate the brightness of a video device (default: off).</span><span class="hljs-meta">#</span><span class="bash"> The auto_brightness feature uses the brightness option as its target value.</span><span class="hljs-meta">#</span><span class="bash"> If brightness is zero auto_brightness will adjust to average brightness value 128.</span><span class="hljs-meta">#</span><span class="bash"> Only recommended <span class="hljs-keyword">for</span> cameras without auto brightness</span>auto_brightness off<span class="hljs-meta">#</span><span class="bash"> Set the initial brightness of a video device.</span><span class="hljs-meta">#</span><span class="bash"> If auto_brightness is enabled, this value defines the average brightness level</span><span class="hljs-meta">#</span><span class="bash"> <span class="hljs-built_in">which</span> Motion will try and adjust to.</span><span class="hljs-meta">#</span><span class="bash"> Valid range 0-255, default 0 = disabled</span>brightness 0<span class="hljs-meta">#</span><span class="bash"> Set the contrast of a video device.</span><span class="hljs-meta">#</span><span class="bash"> Valid range 0-255, default 0 = disabled</span>contrast 0<span class="hljs-meta">#</span><span class="bash"> Set the saturation of a video device.</span><span class="hljs-meta">#</span><span class="bash"> Valid range 0-255, default 0 = disabled</span>saturation 0<span class="hljs-meta">#</span><span class="bash"> Set the hue of a video device (NTSC feature).</span><span class="hljs-meta">#</span><span class="bash"> Valid range 0-255, default 0 = disabled</span>hue 0<span class="hljs-meta">#</span><span class="bash"><span class="hljs-comment">###########################################################</span></span><span class="hljs-meta">#</span><span class="bash"> Round Robin (multiple inputs on same video device name)</span><span class="hljs-meta">#</span><span class="bash"><span class="hljs-comment">###########################################################</span></span><span class="hljs-meta">#</span><span class="bash"> Number of frames to capture <span class="hljs-keyword">in</span> each roundrobin step (default: 1)</span>roundrobin_frames 1<span class="hljs-meta">#</span><span class="bash"> Number of frames to skip before each roundrobin step (default: 1)</span>roundrobin_skip 1<span class="hljs-meta">#</span><span class="bash"> Try to filter out noise generated by roundrobin (default: off)</span>switchfilter off<span class="hljs-meta">#</span><span class="bash"><span class="hljs-comment">###########################################################</span></span><span class="hljs-meta">#</span><span class="bash"> Motion Detection Settings:</span><span class="hljs-meta">#</span><span class="bash"><span class="hljs-comment">###########################################################</span></span><span class="hljs-meta">#</span><span class="bash"> Threshold <span class="hljs-keyword">for</span> number of changed pixels <span class="hljs-keyword">in</span> an image that</span><span class="hljs-meta">#</span><span class="bash"> triggers motion detection (default: 1500)</span>threshold 1500<span class="hljs-meta">#</span><span class="bash"> Automatically tune the threshold down <span class="hljs-keyword">if</span> possible (default: off)</span>threshold_tune off<span class="hljs-meta">#</span><span class="bash"> Noise threshold <span class="hljs-keyword">for</span> the motion detection (default: 32)</span>noise_level 32<span class="hljs-meta">#</span><span class="bash"> Automatically tune the noise threshold (default: on)</span>noise_tune on<span class="hljs-meta">#</span><span class="bash"> Despeckle motion image using (e)rode or (d)ilate or (l)abel (Default: not defined)</span><span class="hljs-meta">#</span><span class="bash"> Recommended value is EedDl. Any combination (and number of) of E, e, d, and D is valid.</span><span class="hljs-meta">#</span><span class="bash"> (l)abeling must only be used once and the <span class="hljs-string">&#x27;l&#x27;</span> must be the last letter.</span><span class="hljs-meta">#</span><span class="bash"> Comment out to <span class="hljs-built_in">disable</span></span>despeckle_filter EedDl<span class="hljs-meta">#</span><span class="bash"> Detect motion <span class="hljs-keyword">in</span> predefined areas (1 - 9). Areas are numbered like that:  1 2 3</span><span class="hljs-meta">#</span><span class="bash"> A script (on_area_detected) is started immediately when motion is         4 5 6</span><span class="hljs-meta">#</span><span class="bash"> detected <span class="hljs-keyword">in</span> one of the given areas, but only once during an event.        7 8 9</span><span class="hljs-meta">#</span><span class="bash"> One or more areas can be specified with this option. Take care: This option</span><span class="hljs-meta">#</span><span class="bash"> does NOT restrict detection to these areas! (Default: not defined)</span>; area_detect value<span class="hljs-meta">#</span><span class="bash"> PGM file to use as a sensitivity mask.</span><span class="hljs-meta">#</span><span class="bash"> Full path name to. (Default: not defined)</span>; mask_file value<span class="hljs-meta">#</span><span class="bash"> PGM file to completely mask out a area of image.</span><span class="hljs-meta">#</span><span class="bash"> Full path name to. (Default: not defined)</span><span class="hljs-meta">#</span><span class="bash"> mask_privacy value</span><span class="hljs-meta">#</span><span class="bash"> Dynamically create a mask file during operation (default: 0)</span><span class="hljs-meta">#</span><span class="bash"> Adjust speed of mask changes from 0 (off) to 10 (fast)</span>smart_mask_speed 0<span class="hljs-meta">#</span><span class="bash"> Ignore sudden massive light intensity changes given as a percentage of the picture</span><span class="hljs-meta">#</span><span class="bash"> area that changed intensity. Valid range: 0 - 100 , default: 0 = disabled</span>lightswitch 0<span class="hljs-meta">#</span><span class="bash"> Picture frames must contain motion at least the specified number of frames</span><span class="hljs-meta">#</span><span class="bash"> <span class="hljs-keyword">in</span> a row before they are detected as <span class="hljs-literal">true</span> motion. At the default of 1, all</span><span class="hljs-meta">#</span><span class="bash"> motion is detected. Valid range: 1 to thousands, recommended 1-5</span>minimum_motion_frames 1<span class="hljs-meta">#</span><span class="bash"> Specifies the number of pre-captured (buffered) pictures from before motion</span><span class="hljs-meta">#</span><span class="bash"> was detected that will be output at motion detection.</span><span class="hljs-meta">#</span><span class="bash"> Recommended range: 0 to 5 (default: 0)</span><span class="hljs-meta">#</span><span class="bash"> Do not use large values! Large values will cause Motion to skip video frames and</span><span class="hljs-meta">#</span><span class="bash"> cause unsmooth movies. To smooth movies use larger values of post_capture instead.</span>pre_capture 0<span class="hljs-meta">#</span><span class="bash"> Number of frames to capture after motion is no longer detected (default: 0)</span>post_capture 0<span class="hljs-meta">#</span><span class="bash"> Event Gap is the seconds of no motion detection that triggers the end of an event.</span><span class="hljs-meta">#</span><span class="bash"> An event is defined as a series of motion images taken within a short timeframe.</span><span class="hljs-meta">#</span><span class="bash"> Recommended value is 60 seconds (Default). The value -1 is allowed and disables</span><span class="hljs-meta">#</span><span class="bash"> events causing all Motion to be written to one single movie file and no pre_capture.</span><span class="hljs-meta">#</span><span class="bash"> If <span class="hljs-built_in">set</span> to 0, motion is running <span class="hljs-keyword">in</span> gapless mode. Movies don<span class="hljs-string">&#x27;t have gaps anymore. An</span></span><span class="hljs-meta">#</span><span class="bash"> event ends right after no more motion is detected and post_capture is over.</span>event_gap 60<span class="hljs-meta">#</span><span class="bash"> Maximum length <span class="hljs-keyword">in</span> seconds of a movie</span><span class="hljs-meta">#</span><span class="bash"> When value is exceeded a new movie file is created. (Default: 0 = infinite)</span>max_movie_time 0<span class="hljs-meta">#</span><span class="bash"> Always save images even <span class="hljs-keyword">if</span> there was no motion (default: off)</span>emulate_motion off<span class="hljs-meta">#</span><span class="bash"><span class="hljs-comment">###########################################################</span></span><span class="hljs-meta">#</span><span class="bash"> Image File Output</span><span class="hljs-meta">#</span><span class="bash"><span class="hljs-comment">###########################################################</span></span><span class="hljs-meta">#</span><span class="bash"> Output <span class="hljs-string">&#x27;normal&#x27;</span> pictures when motion is detected (default: off)</span><span class="hljs-meta">#</span><span class="bash"> Valid values: on, off, first, best, center</span><span class="hljs-meta">#</span><span class="bash"> When <span class="hljs-built_in">set</span> to <span class="hljs-string">&#x27;first&#x27;</span>, only the first picture of an event is saved.</span><span class="hljs-meta">#</span><span class="bash"> Picture with most motion of an event is saved when <span class="hljs-built_in">set</span> to <span class="hljs-string">&#x27;best&#x27;</span>.</span><span class="hljs-meta">#</span><span class="bash"> Picture with motion nearest center of picture is saved when <span class="hljs-built_in">set</span> to <span class="hljs-string">&#x27;center&#x27;</span>.</span><span class="hljs-meta">#</span><span class="bash"> Can be used as preview shot <span class="hljs-keyword">for</span> the corresponding movie.</span>output_pictures off<span class="hljs-meta">#</span><span class="bash"> Output pictures with only the pixels moving object (ghost images) (default: off)</span>output_debug_pictures off<span class="hljs-meta">#</span><span class="bash"> The quality (<span class="hljs-keyword">in</span> percent) to be used by the jpeg and webp compression (default: 75)</span>quality 75<span class="hljs-meta">#</span><span class="bash"> Type of output images</span><span class="hljs-meta">#</span><span class="bash"> Valid values: jpeg, ppm or webp (default: jpeg)</span>picture_type jpeg<span class="hljs-meta">#</span><span class="bash"><span class="hljs-comment">###########################################################</span></span><span class="hljs-meta">#</span><span class="bash"> Use ffmpeg to encode videos of motion (default: off)</span>ffmpeg_output_movies on<span class="hljs-meta">#</span><span class="bash"> Use ffmpeg to make videos showing the moving pixels (ghost images) (default: off)</span>ffmpeg_output_debug_movies off<span class="hljs-meta">#</span><span class="bash"> Bitrate to be used by the ffmpeg encoder (default: 400000)</span><span class="hljs-meta">#</span><span class="bash"> This option is ignored <span class="hljs-keyword">if</span> ffmpeg_variable_bitrate is not 0 (disabled)</span>ffmpeg_bps 400000<span class="hljs-meta">#</span><span class="bash"> Enables and defines variable bitrate <span class="hljs-keyword">for</span> the ffmpeg encoder.</span><span class="hljs-meta">#</span><span class="bash"> ffmpeg_bps is ignored <span class="hljs-keyword">if</span> variable bitrate is enabled.</span><span class="hljs-meta">#</span><span class="bash"> Valid values: 0 (default) = fixed bitrate defined by ffmpeg_bps,</span><span class="hljs-meta">#</span><span class="bash"> or the range 1 - 100 <span class="hljs-built_in">where</span> 1 means worst quality and 100 is best.</span>ffmpeg_variable_bitrate 0<span class="hljs-meta">#</span><span class="bash"> Container/Codec output videos</span><span class="hljs-meta">#</span><span class="bash"> Valid values: mpeg4, msmpeg4, swf,flv, ffv1, mov, mp4, mkv, hevc</span>ffmpeg_video_codec mkv<span class="hljs-meta">#</span><span class="bash"> When creating videos, should frames be duplicated <span class="hljs-keyword">in</span> order</span><span class="hljs-meta">#</span><span class="bash"> to keep up with the requested frames per second</span><span class="hljs-meta">#</span><span class="bash"> (default: <span class="hljs-literal">true</span>)</span>ffmpeg_duplicate_frames true<span class="hljs-meta">#</span><span class="bash"> Interval <span class="hljs-keyword">in</span> seconds between timelapse captures.  Default: 0 = off</span>timelapse_interval 0<span class="hljs-meta">#</span><span class="bash"> Timelapse file rollover mode. See motion_guide.html <span class="hljs-keyword">for</span> options and uses.</span>timelapse_mode daily<span class="hljs-meta">#</span><span class="bash"> Frame rate <span class="hljs-keyword">for</span> timelapse playback</span>timelapse_fps 30<span class="hljs-meta">#</span><span class="bash"> Container/Codec <span class="hljs-keyword">for</span> timelapse video. Valid values: mpg or mpeg4</span>timelapse_codec mpg<span class="hljs-meta">#</span><span class="bash"><span class="hljs-comment">###########################################################</span></span><span class="hljs-meta">#</span><span class="bash"> External pipe to video encoder</span><span class="hljs-meta">#</span><span class="bash"> Replacement <span class="hljs-keyword">for</span> FFMPEG <span class="hljs-built_in">builtin</span> encoder <span class="hljs-keyword">for</span> ffmpeg_output_movies only.</span><span class="hljs-meta">#</span><span class="bash"> The options movie_filename and timelapse_filename are also used</span><span class="hljs-meta">#</span><span class="bash"> by the ffmpeg feature</span><span class="hljs-meta">#</span><span class="bash"><span class="hljs-comment">############################################################</span></span><span class="hljs-meta">#</span><span class="bash"> Bool to <span class="hljs-built_in">enable</span> or <span class="hljs-built_in">disable</span> extpipe (default: off)</span>use_extpipe off<span class="hljs-meta">#</span><span class="bash"> External program (full path and opts) to pipe raw video to</span><span class="hljs-meta">#</span><span class="bash"> Generally, use <span class="hljs-string">&#x27;-&#x27;</span> <span class="hljs-keyword">for</span> STDIN...</span>;extpipe mencoder -demuxer rawvideo -rawvideo w=%w:h=%h:i420 -ovc x264 -x264encopts bframes=4:frameref=1:subq=1:scenecut=-1:nob_adapt:threads=1:keyint=1000:8x8dct:vbv_bufsize=4000:crf=24:partitions=i8x8,i4x4:vbv_maxrate=800:no-chroma-me -vf denoise3d=16:12:48:4,pp=lb -of   avi -o %f.avi - -fps %fps;extpipe x264 - --input-res %wx%h --fps %fps --bitrate 2000 --preset ultrafast --quiet -o %f.mp4;extpipe mencoder -demuxer rawvideo -rawvideo w=%w:h=%h:fps=%fps -ovc x264 -x264encopts preset=ultrafast -of lavf -o %f.mp4 - -fps %fps;extpipe ffmpeg -y -f rawvideo -pix_fmt yuv420p -video_size %wx%h -framerate %fps -i pipe:0 -vcodec libx264 -preset ultrafast -f mp4 %f.mp4<span class="hljs-meta">#</span><span class="bash"><span class="hljs-comment">###########################################################</span></span><span class="hljs-meta">#</span><span class="bash"> Snapshots (Traditional Periodic Webcam File Output)</span><span class="hljs-meta">#</span><span class="bash"><span class="hljs-comment">###########################################################</span></span><span class="hljs-meta">#</span><span class="bash"> Make automated snapshot every N seconds (default: 0 = disabled)</span>snapshot_interval 0<span class="hljs-meta">#</span><span class="bash"><span class="hljs-comment">###########################################################</span></span><span class="hljs-meta">#</span><span class="bash"> Text Display</span><span class="hljs-meta">#</span><span class="bash"> %Y = year, %m = month, %d = date,</span><span class="hljs-meta">#</span><span class="bash"> %H = hour, %M = minute, %S = second, %T = HH:MM:SS,</span><span class="hljs-meta">#</span><span class="bash"> %v = event, %q = frame number, %t = camera id number,</span><span class="hljs-meta">#</span><span class="bash"> %D = changed pixels, %N = noise level, \n = new line,</span><span class="hljs-meta">#</span><span class="bash"> %i and %J = width and height of motion area,</span><span class="hljs-meta">#</span><span class="bash"> %K and %L = X and Y coordinates of motion center</span><span class="hljs-meta">#</span><span class="bash"> %C = value defined by text_event - <span class="hljs-keyword">do</span> not use with text_event!</span><span class="hljs-meta">#</span><span class="bash"> You can put quotation marks around the text to allow</span><span class="hljs-meta">#</span><span class="bash"> leading spaces</span><span class="hljs-meta">#</span><span class="bash"><span class="hljs-comment">###########################################################</span></span><span class="hljs-meta">#</span><span class="bash"> Locate and draw a box around the moving object.</span><span class="hljs-meta">#</span><span class="bash"> Valid values: on, off, preview (default: off)</span><span class="hljs-meta">#</span><span class="bash"> Set to <span class="hljs-string">&#x27;preview&#x27;</span> will only draw a box <span class="hljs-keyword">in</span> preview_shot pictures.</span>locate_motion_mode off<span class="hljs-meta">#</span><span class="bash"> Set the look and style of the locate box <span class="hljs-keyword">if</span> enabled.</span><span class="hljs-meta">#</span><span class="bash"> Valid values: box, redbox, cross, redcross (default: box)</span><span class="hljs-meta">#</span><span class="bash"> Set to <span class="hljs-string">&#x27;box&#x27;</span> will draw the traditional box.</span><span class="hljs-meta">#</span><span class="bash"> Set to <span class="hljs-string">&#x27;redbox&#x27;</span> will draw a red box.</span><span class="hljs-meta">#</span><span class="bash"> Set to <span class="hljs-string">&#x27;cross&#x27;</span> will draw a little cross to mark center.</span><span class="hljs-meta">#</span><span class="bash"> Set to <span class="hljs-string">&#x27;redcross&#x27;</span> will draw a little red cross to mark center.</span>locate_motion_style box<span class="hljs-meta">#</span><span class="bash"> Draws the timestamp using same options as C <span class="hljs-keyword">function</span> strftime(3)</span><span class="hljs-meta">#</span><span class="bash"> Default: %Y-%m-%d\n%T = date <span class="hljs-keyword">in</span> ISO format and time <span class="hljs-keyword">in</span> 24 hour clock</span><span class="hljs-meta">#</span><span class="bash"> Text is placed <span class="hljs-keyword">in</span> lower right corner</span>text_right %Y-%m-%d\n%T-%q<span class="hljs-meta">#</span><span class="bash"> Draw a user defined text on the images using same options as C <span class="hljs-keyword">function</span> strftime(3)</span><span class="hljs-meta">#</span><span class="bash"> Default: Not defined = no text</span><span class="hljs-meta">#</span><span class="bash"> Text is placed <span class="hljs-keyword">in</span> lower left corner</span>; text_left CAMERA %t<span class="hljs-meta">#</span><span class="bash"> Draw the number of changed pixed on the images (default: off)</span><span class="hljs-meta">#</span><span class="bash"> Will normally be <span class="hljs-built_in">set</span> to off except when you setup and adjust the motion settings</span><span class="hljs-meta">#</span><span class="bash"> Text is placed <span class="hljs-keyword">in</span> upper right corner</span>text_changes off<span class="hljs-meta">#</span><span class="bash"> This option defines the value of the special event conversion specifier %C</span><span class="hljs-meta">#</span><span class="bash"> You can use any conversion specifier <span class="hljs-keyword">in</span> this option except %C. Date and time</span><span class="hljs-meta">#</span><span class="bash"> values are from the timestamp of the first image <span class="hljs-keyword">in</span> the current event.</span><span class="hljs-meta">#</span><span class="bash"> Default: %Y%m%d%H%M%S</span><span class="hljs-meta">#</span><span class="bash"> The idea is that %C can be used filenames and text_left/right <span class="hljs-keyword">for</span> creating</span><span class="hljs-meta">#</span><span class="bash"> a unique identifier <span class="hljs-keyword">for</span> each event.</span>text_event %Y%m%d%H%M%S<span class="hljs-meta">#</span><span class="bash"> Draw characters at twice normal size on images. (default: off)</span>text_double off<span class="hljs-meta">#</span><span class="bash"> Text to include <span class="hljs-keyword">in</span> a JPEG EXIF comment</span><span class="hljs-meta">#</span><span class="bash"> May be any text, including conversion specifiers.</span><span class="hljs-meta">#</span><span class="bash"> The EXIF timestamp is included independent of this text.</span>;exif_text %i%J/%K%L<span class="hljs-meta">#</span><span class="bash"><span class="hljs-comment">###########################################################</span></span><span class="hljs-meta">#</span><span class="bash"> Target Directories and filenames For Images And Films</span><span class="hljs-meta">#</span><span class="bash"> For the options snapshot_, picture_, movie_ and timelapse_filename</span><span class="hljs-meta">#</span><span class="bash"> you can use conversion specifiers</span><span class="hljs-meta">#</span><span class="bash"> %Y = year, %m = month, %d = date,</span><span class="hljs-meta">#</span><span class="bash"> %H = hour, %M = minute, %S = second,</span><span class="hljs-meta">#</span><span class="bash"> %v = event, %q = frame number, %t = camera id number,</span><span class="hljs-meta">#</span><span class="bash"> %D = changed pixels, %N = noise level,</span><span class="hljs-meta">#</span><span class="bash"> %i and %J = width and height of motion area,</span><span class="hljs-meta">#</span><span class="bash"> %K and %L = X and Y coordinates of motion center</span><span class="hljs-meta">#</span><span class="bash"> %C = value defined by text_event</span><span class="hljs-meta">#</span><span class="bash"> Quotation marks round string are allowed.</span><span class="hljs-meta">#</span><span class="bash"><span class="hljs-comment">###########################################################</span></span><span class="hljs-meta">#</span><span class="bash"> Target base directory <span class="hljs-keyword">for</span> pictures and films</span><span class="hljs-meta">#</span><span class="bash"> Recommended to use absolute path. (Default: current working directory)</span>target_dir /var/lib/motion<span class="hljs-meta">#</span><span class="bash"> File path <span class="hljs-keyword">for</span> snapshots (jpeg, ppm or webp) relative to target_dir</span><span class="hljs-meta">#</span><span class="bash"> Default: %v-%Y%m%d%H%M%S-snapshot</span><span class="hljs-meta">#</span><span class="bash"> Default value is equivalent to legacy oldlayout option</span><span class="hljs-meta">#</span><span class="bash"> For Motion 3.0 compatible mode choose: %Y/%m/%d/%H/%M/%S-snapshot</span><span class="hljs-meta">#</span><span class="bash"> File extension .jpg, .ppm or .webp is automatically added so <span class="hljs-keyword">do</span> not include this.</span><span class="hljs-meta">#</span><span class="bash"> Note: A symbolic link called lastsnap.jpg created <span class="hljs-keyword">in</span> the target_dir will always</span><span class="hljs-meta">#</span><span class="bash"> point to the latest snapshot, unless snapshot_filename is exactly <span class="hljs-string">&#x27;lastsnap&#x27;</span></span>snapshot_filename %v-%Y%m%d%H%M%S-snapshot<span class="hljs-meta">#</span><span class="bash"> File path <span class="hljs-keyword">for</span> motion triggered images (jpeg, ppm or .webp) relative to target_dir</span><span class="hljs-meta">#</span><span class="bash"> Default: %v-%Y%m%d%H%M%S-%q</span><span class="hljs-meta">#</span><span class="bash"> Default value is equivalent to legacy oldlayout option</span><span class="hljs-meta">#</span><span class="bash"> For Motion 3.0 compatible mode choose: %Y/%m/%d/%H/%M/%S-%q</span><span class="hljs-meta">#</span><span class="bash"> File extension .jpg, .ppm or .webp is automatically added so <span class="hljs-keyword">do</span> not include this</span><span class="hljs-meta">#</span><span class="bash"> Set to <span class="hljs-string">&#x27;preview&#x27;</span> together with best-preview feature enables special naming</span><span class="hljs-meta">#</span><span class="bash"> convention <span class="hljs-keyword">for</span> preview shots. See motion guide <span class="hljs-keyword">for</span> details</span>picture_filename %v-%Y%m%d%H%M%S-%q<span class="hljs-meta">#</span><span class="bash"> File path <span class="hljs-keyword">for</span> motion triggered ffmpeg films (movies) relative to target_dir</span><span class="hljs-meta">#</span><span class="bash"> Default: %v-%Y%m%d%H%M%S</span><span class="hljs-meta">#</span><span class="bash"> File extensions(.mpg .avi) are automatically added so <span class="hljs-keyword">do</span> not include them</span>movie_filename %v-%Y%m%d%H%M%S<span class="hljs-meta">#</span><span class="bash"> File path <span class="hljs-keyword">for</span> timelapse movies relative to target_dir</span><span class="hljs-meta">#</span><span class="bash"> Default: %Y%m%d-timelapse</span><span class="hljs-meta">#</span><span class="bash"> File extensions(.mpg .avi) are automatically added so <span class="hljs-keyword">do</span> not include them</span>timelapse_filename %Y%m%d-timelapse<span class="hljs-meta">#</span><span class="bash"><span class="hljs-comment">###########################################################</span></span><span class="hljs-meta">#</span><span class="bash"> Global Network Options</span><span class="hljs-meta">#</span><span class="bash"><span class="hljs-comment">###########################################################</span></span><span class="hljs-meta">#</span><span class="bash"> Enable IPv6 (default: off)</span>ipv6_enabled off<span class="hljs-meta">#</span><span class="bash"><span class="hljs-comment">###########################################################</span></span><span class="hljs-meta">#</span><span class="bash"> Live Stream Server</span><span class="hljs-meta">#</span><span class="bash"><span class="hljs-comment">###########################################################</span></span><span class="hljs-meta">#</span><span class="bash"> The mini-http server listens to this port <span class="hljs-keyword">for</span> requests (default: 0 = disabled)</span>stream_port 8081<span class="hljs-meta">#</span><span class="bash"> 50% scaled down substream (default: 0 = disabled)</span><span class="hljs-meta">#</span><span class="bash"> substream_port 8082</span><span class="hljs-meta">#</span><span class="bash"> Quality of the jpeg (<span class="hljs-keyword">in</span> percent) images produced (default: 50)</span>stream_quality 50<span class="hljs-meta">#</span><span class="bash"> Output frames at 1 fps when no motion is detected and increase to the</span><span class="hljs-meta">#</span><span class="bash"> rate given by stream_maxrate when motion is detected (default: off)</span>stream_motion off<span class="hljs-meta">#</span><span class="bash"> Maximum framerate <span class="hljs-keyword">for</span> stream streams (default: 1)</span>stream_maxrate 1<span class="hljs-meta">#</span><span class="bash"> Restrict stream connections to localhost only (default: on)</span>stream_localhost off<span class="hljs-meta">#</span><span class="bash"> Limits the number of images per connection (default: 0 = unlimited)</span><span class="hljs-meta">#</span><span class="bash"> Number can be defined by multiplying actual stream rate by desired number of seconds</span><span class="hljs-meta">#</span><span class="bash"> Actual stream rate is the smallest of the numbers framerate and stream_maxrate</span>stream_limit 0<span class="hljs-meta">#</span><span class="bash"> Set the authentication method (default: 0)</span><span class="hljs-meta">#</span><span class="bash"> 0 = disabled</span><span class="hljs-meta">#</span><span class="bash"> 1 = Basic authentication</span><span class="hljs-meta">#</span><span class="bash"> 2 = MD5 digest (the safer authentication)</span>stream_auth_method 0<span class="hljs-meta">#</span><span class="bash"> Authentication <span class="hljs-keyword">for</span> the stream. Syntax username:password</span><span class="hljs-meta">#</span><span class="bash"> Default: not defined (Disabled)</span>; stream_authentication username:password<span class="hljs-meta">#</span><span class="bash"> Percentage to scale the stream image <span class="hljs-keyword">for</span> preview</span><span class="hljs-meta">#</span><span class="bash"> This is scaled on the browser side, motion will keep sending full frames</span><span class="hljs-meta">#</span><span class="bash"> Default: 25</span>; stream_preview_scale 25<span class="hljs-meta">#</span><span class="bash"> Have stream preview image start on a new line</span><span class="hljs-meta">#</span><span class="bash"> Default: no</span>; stream_preview_newline no<span class="hljs-meta">#</span><span class="bash"><span class="hljs-comment">###########################################################</span></span><span class="hljs-meta">#</span><span class="bash"> HTTP Based Control</span><span class="hljs-meta">#</span><span class="bash"><span class="hljs-comment">###########################################################</span></span><span class="hljs-meta">#</span><span class="bash"> TCP/IP port <span class="hljs-keyword">for</span> the http server to listen on (default: 0 = disabled)</span>webcontrol_port 8080<span class="hljs-meta">#</span><span class="bash"> Restrict control connections to localhost only (default: on)</span>webcontrol_localhost off<span class="hljs-meta">#</span><span class="bash"> Output <span class="hljs-keyword">for</span> http server, select off to choose raw text plain (default: on)</span>webcontrol_html_output on<span class="hljs-meta">#</span><span class="bash"> Authentication <span class="hljs-keyword">for</span> the http based control. Syntax username:password</span><span class="hljs-meta">#</span><span class="bash"> Default: not defined (Disabled)</span>; webcontrol_authentication username:password<span class="hljs-meta">#</span><span class="bash"> Parameters to include on webcontrol.  0=none, 1=limited, 2=advanced, 3=restricted</span><span class="hljs-meta">#</span><span class="bash"> Default: 0 (none)</span>webcontrol_parms 0<span class="hljs-meta">#</span><span class="bash"><span class="hljs-comment">###########################################################</span></span><span class="hljs-meta">#</span><span class="bash"> Tracking (Pan/Tilt)</span><span class="hljs-meta">#</span><span class="bash"><span class="hljs-comment">############################################################</span></span><span class="hljs-meta">#</span><span class="bash"> Type of tracker (0=none (default), 1=stepper, 2=iomojo, 3=pwc, 4=generic, 5=uvcvideo, 6=servo)</span><span class="hljs-meta">#</span><span class="bash"> The generic <span class="hljs-built_in">type</span> enables the definition of motion center and motion size to</span><span class="hljs-meta">#</span><span class="bash"> be used with the conversion specifiers <span class="hljs-keyword">for</span> options like on_motion_detected</span>track_type 0<span class="hljs-meta">#</span><span class="bash"> Enable auto tracking (default: off)</span>track_auto off<span class="hljs-meta">#</span><span class="bash"> Serial port of motor (default: none)</span>;track_port /dev/ttyS0<span class="hljs-meta">#</span><span class="bash"> Motor number <span class="hljs-keyword">for</span> x-axis (default: 0)</span>;track_motorx 0<span class="hljs-meta">#</span><span class="bash"> Set motorx reverse (default: 0)</span>;track_motorx_reverse 0<span class="hljs-meta">#</span><span class="bash"> Motor number <span class="hljs-keyword">for</span> y-axis (default: 0)</span>;track_motory 1<span class="hljs-meta">#</span><span class="bash"> Set motory reverse (default: 0)</span>;track_motory_reverse 0<span class="hljs-meta">#</span><span class="bash"> Maximum value on x-axis (default: 0)</span>;track_maxx 200<span class="hljs-meta">#</span><span class="bash"> Minimum value on x-axis (default: 0)</span>;track_minx 50<span class="hljs-meta">#</span><span class="bash"> Maximum value on y-axis (default: 0)</span>;track_maxy 200<span class="hljs-meta">#</span><span class="bash"> Minimum value on y-axis (default: 0)</span>;track_miny 50<span class="hljs-meta">#</span><span class="bash"> Center value on x-axis (default: 0)</span>;track_homex 128<span class="hljs-meta">#</span><span class="bash"> Center value on y-axis (default: 0)</span>;track_homey 128<span class="hljs-meta">#</span><span class="bash"> ID of an iomojo camera <span class="hljs-keyword">if</span> used (default: 0)</span>track_iomojo_id 0<span class="hljs-meta">#</span><span class="bash"> Angle <span class="hljs-keyword">in</span> degrees the camera moves per step on the X-axis</span><span class="hljs-meta">#</span><span class="bash"> with auto-track (default: 10)</span><span class="hljs-meta">#</span><span class="bash"> Currently only used with pwc <span class="hljs-built_in">type</span> cameras</span>track_step_angle_x 10<span class="hljs-meta">#</span><span class="bash"> Angle <span class="hljs-keyword">in</span> degrees the camera moves per step on the Y-axis</span><span class="hljs-meta">#</span><span class="bash"> with auto-track (default: 10)</span><span class="hljs-meta">#</span><span class="bash"> Currently only used with pwc <span class="hljs-built_in">type</span> cameras</span>track_step_angle_y 10<span class="hljs-meta">#</span><span class="bash"> Delay to <span class="hljs-built_in">wait</span> <span class="hljs-keyword">for</span> after tracking movement as number</span><span class="hljs-meta">#</span><span class="bash"> of picture frames (default: 10)</span>track_move_wait 10<span class="hljs-meta">#</span><span class="bash"> Speed to <span class="hljs-built_in">set</span> the motor to (stepper motor option) (default: 255)</span>track_speed 255<span class="hljs-meta">#</span><span class="bash"> Number of steps to make (stepper motor option) (default: 40)</span>track_stepsize 40<span class="hljs-meta">#</span><span class="bash"><span class="hljs-comment">###########################################################</span></span><span class="hljs-meta">#</span><span class="bash"> External Commands, Warnings and Logging:</span><span class="hljs-meta">#</span><span class="bash"> You can use conversion specifiers <span class="hljs-keyword">for</span> the on_xxxx commands</span><span class="hljs-meta">#</span><span class="bash"> %Y = year, %m = month, %d = date,</span><span class="hljs-meta">#</span><span class="bash"> %H = hour, %M = minute, %S = second,</span><span class="hljs-meta">#</span><span class="bash"> %v = event, %q = frame number, %t = camera id number,</span><span class="hljs-meta">#</span><span class="bash"> %D = changed pixels, %N = noise level,</span><span class="hljs-meta">#</span><span class="bash"> %i and %J = width and height of motion area,</span><span class="hljs-meta">#</span><span class="bash"> %K and %L = X and Y coordinates of motion center</span><span class="hljs-meta">#</span><span class="bash"> %C = value defined by text_event</span><span class="hljs-meta">#</span><span class="bash"> %f = filename with full path</span><span class="hljs-meta">#</span><span class="bash"> %n = number indicating filetype</span><span class="hljs-meta">#</span><span class="bash"> Both %f and %n are only defined <span class="hljs-keyword">for</span> on_picture_save,</span><span class="hljs-meta">#</span><span class="bash"> on_movie_start and on_movie_end</span><span class="hljs-meta">#</span><span class="bash"> Quotation marks round string are allowed.</span><span class="hljs-meta">#</span><span class="bash"><span class="hljs-comment">###########################################################</span></span><span class="hljs-meta">#</span><span class="bash"> Do not sound beeps when detecting motion (default: on)</span><span class="hljs-meta">#</span><span class="bash"> Note: Motion never beeps when running <span class="hljs-keyword">in</span> daemon mode.</span>quiet on<span class="hljs-meta">#</span><span class="bash"> Command to be executed when an event starts. (default: none)</span><span class="hljs-meta">#</span><span class="bash"> An event starts at first motion detected after a period of no motion defined by event_gap</span>; on_event_start value<span class="hljs-meta">#</span><span class="bash"> Command to be executed when an event ends after a period of no motion</span><span class="hljs-meta">#</span><span class="bash"> (default: none). The period of no motion is defined by option event_gap.</span>; on_event_end value<span class="hljs-meta">#</span><span class="bash"> Command to be executed when a picture (.ppm|.jpg) is saved (default: none)</span><span class="hljs-meta">#</span><span class="bash"> To give the filename as an argument to a <span class="hljs-built_in">command</span> append it with %f</span>; on_picture_save value<span class="hljs-meta">#</span><span class="bash"> Command to be executed when a motion frame is detected (default: none)</span>; on_motion_detected value<span class="hljs-meta">#</span><span class="bash"> Command to be executed when motion <span class="hljs-keyword">in</span> a predefined area is detected</span><span class="hljs-meta">#</span><span class="bash"> Check option <span class="hljs-string">&#x27;area_detect&#x27;</span>.   (default: none)</span>; on_area_detected value<span class="hljs-meta">#</span><span class="bash"> Command to be executed when a movie file (.mpg|.avi) is created. (default: none)</span><span class="hljs-meta">#</span><span class="bash"> To give the filename as an argument to a <span class="hljs-built_in">command</span> append it with %f</span>; on_movie_start value<span class="hljs-meta">#</span><span class="bash"> Command to be executed when a movie file (.mpg|.avi) is closed. (default: none)</span><span class="hljs-meta">#</span><span class="bash"> To give the filename as an argument to a <span class="hljs-built_in">command</span> append it with %f</span>; on_movie_end value<span class="hljs-meta">#</span><span class="bash"> Command to be executed when a camera can<span class="hljs-string">&#x27;t be opened or if it is lost</span></span><span class="hljs-meta">#</span><span class="bash"> NOTE: There is situations when motion don<span class="hljs-string">&#x27;t detect a lost camera!</span></span><span class="hljs-meta">#</span><span class="bash"> It depends on the driver, some drivers dosn<span class="hljs-string">&#x27;t detect a lost camera at all</span></span><span class="hljs-meta">#</span><span class="bash"> Some hangs the motion thread. Some even hangs the PC! (default: none)</span>; on_camera_lost value<span class="hljs-meta">#</span><span class="bash"> Command to be executed when a camera that was lost has been found (default: none)</span><span class="hljs-meta">#</span><span class="bash"> NOTE: If motion doesn<span class="hljs-string">&#x27;t properly detect a lost camera, it also won&#x27;</span>t know it found one.</span>; on_camera_found value<span class="hljs-meta">#</span><span class="bash"><span class="hljs-comment">####################################################################</span></span><span class="hljs-meta">#</span><span class="bash"> Common Options <span class="hljs-keyword">for</span> database features.</span><span class="hljs-meta">#</span><span class="bash"> Options require database options to be active also.</span><span class="hljs-meta">#</span><span class="bash"><span class="hljs-comment">####################################################################</span></span><span class="hljs-meta">#</span><span class="bash"> Log to the database when creating motion triggered picture file  (default: on)</span>; sql_log_picture on<span class="hljs-meta">#</span><span class="bash"> Log to the database when creating a snapshot image file (default: on)</span>; sql_log_snapshot on<span class="hljs-meta">#</span><span class="bash"> Log to the database when creating motion triggered movie file (default: off)</span>; sql_log_movie off<span class="hljs-meta">#</span><span class="bash"> Log to the database when creating timelapse movies file (default: off)</span>; sql_log_timelapse off<span class="hljs-meta">#</span><span class="bash"> SQL query string that is sent to the database</span><span class="hljs-meta">#</span><span class="bash"> Use same conversion specifiers has <span class="hljs-keyword">for</span> text features</span><span class="hljs-meta">#</span><span class="bash"> Additional special conversion specifiers are</span><span class="hljs-meta">#</span><span class="bash"> %n = the number representing the file_type</span><span class="hljs-meta">#</span><span class="bash"> %f = filename with full path</span><span class="hljs-meta">#</span><span class="bash"> Default value:</span><span class="hljs-meta">#</span><span class="bash"> Create tables :</span><span class="hljs-meta">#</span><span class="bash"><span class="hljs-comment">#</span></span><span class="hljs-meta">#</span><span class="bash"> Mysql</span><span class="hljs-meta">#</span><span class="bash"> CREATE TABLE security (camera int, filename char(80) not null, frame int, file_type int, time_stamp timestamp(14), event_time_stamp timestamp(14));</span><span class="hljs-meta">#</span><span class="hljs-meta">#</span><span class="bash"> Postgresql</span><span class="hljs-meta">#</span><span class="bash"> CREATE TABLE security (camera int, filename char(80) not null, frame int, file_type int, time_stamp timestamp without time zone, event_time_stamp timestamp without time zone);</span><span class="hljs-meta">#</span><span class="hljs-meta">#</span><span class="bash"> insert into security(camera, filename, frame, file_type, time_stamp, text_event) values(<span class="hljs-string">&#x27;%t&#x27;</span>, <span class="hljs-string">&#x27;%f&#x27;</span>, <span class="hljs-string">&#x27;%q&#x27;</span>, <span class="hljs-string">&#x27;%n&#x27;</span>, <span class="hljs-string">&#x27;%Y-%m-%d %T&#x27;</span>, <span class="hljs-string">&#x27;%C&#x27;</span>)</span>; sql_query insert into security(camera, filename, frame, file_type, time_stamp, event_time_stamp) values(&#x27;%t&#x27;, &#x27;%f&#x27;, &#x27;%q&#x27;, &#x27;%n&#x27;, &#x27;%Y-%m-%d %T&#x27;, &#x27;%C&#x27;)<span class="hljs-meta">#</span><span class="bash"><span class="hljs-comment">###########################################################</span></span><span class="hljs-meta">#</span><span class="bash"> Database Options</span><span class="hljs-meta">#</span><span class="bash"><span class="hljs-comment">###########################################################</span></span><span class="hljs-meta">#</span><span class="bash"> database <span class="hljs-built_in">type</span> : mysql, postgresql, sqlite3 (default : not defined)</span>; database_type value<span class="hljs-meta">#</span><span class="bash"> database to <span class="hljs-built_in">log</span> to (default: not defined)</span><span class="hljs-meta">#</span><span class="bash"> <span class="hljs-keyword">for</span> sqlite3, the full path and name <span class="hljs-keyword">for</span> the database.</span>; database_dbname value<span class="hljs-meta">#</span><span class="bash"> The host on <span class="hljs-built_in">which</span> the database is located (default: localhost)</span>; database_host value<span class="hljs-meta">#</span><span class="bash"> User account name <span class="hljs-keyword">for</span> database (default: not defined)</span>; database_user value<span class="hljs-meta">#</span><span class="bash"> User password <span class="hljs-keyword">for</span> database (default: not defined)</span>; database_password value<span class="hljs-meta">#</span><span class="bash"> Port on <span class="hljs-built_in">which</span> the database is located</span><span class="hljs-meta">#</span><span class="bash">  mysql 3306 , postgresql 5432 (default: not defined)</span>; database_port value<span class="hljs-meta">#</span><span class="bash"> Database <span class="hljs-built_in">wait</span> time <span class="hljs-keyword">in</span> milliseconds <span class="hljs-keyword">for</span> locked database to</span><span class="hljs-meta">#</span><span class="bash"> be unlocked before returning database locked error (default 0)</span>; database_busy_timeout 0<span class="hljs-meta">#</span><span class="bash"><span class="hljs-comment">###########################################################</span></span><span class="hljs-meta">#</span><span class="bash"> Video Loopback Device (vloopback project)</span><span class="hljs-meta">#</span><span class="bash"><span class="hljs-comment">###########################################################</span></span><span class="hljs-meta">#</span><span class="bash"> Output images to a video4linux loopback device</span><span class="hljs-meta">#</span><span class="bash"> Specify the device associated with the loopback device</span><span class="hljs-meta">#</span><span class="bash"> For example /dev/video1 (default: not defined)</span>; video_pipe value<span class="hljs-meta">#</span><span class="bash"> Output motion images to a video4linux loopback device</span><span class="hljs-meta">#</span><span class="bash"> Specify the device associated with the loopback device</span><span class="hljs-meta">#</span><span class="bash"> For example /dev/video1 (default: not defined)</span>; motion_video_pipe value<span class="hljs-meta">#</span><span class="bash"><span class="hljs-comment">#############################################################</span></span><span class="hljs-meta">#</span><span class="bash"> camera config files - One <span class="hljs-keyword">for</span> each camera.</span><span class="hljs-meta">#</span><span class="bash"> Except <span class="hljs-keyword">if</span> only one camera - You only need this config file.</span><span class="hljs-meta">#</span><span class="bash"> If you have more than one camera you MUST define one camera</span><span class="hljs-meta">#</span><span class="bash"> config file <span class="hljs-keyword">for</span> each camera <span class="hljs-keyword">in</span> addition to this config file.</span><span class="hljs-meta">#</span><span class="bash"><span class="hljs-comment">#############################################################</span></span><span class="hljs-meta">#</span><span class="bash"> Remember: If you have more than one camera you must have one</span><span class="hljs-meta">#</span><span class="bash"> camera file <span class="hljs-keyword">for</span> each camera. E.g. 2 cameras requires 3 files:</span><span class="hljs-meta">#</span><span class="bash"> This motion.conf file AND camera1.conf and camera2.conf.</span><span class="hljs-meta">#</span><span class="bash"> Only put the options that are unique to each camera <span class="hljs-keyword">in</span> the</span><span class="hljs-meta">#</span><span class="bash"> camera config files.</span>; camera /etc/motion/camera1.conf; camera /etc/motion/camera2.conf; camera /etc/motion/camera3.conf; camera /etc/motion/camera4.conf<span class="hljs-meta">#</span><span class="bash"><span class="hljs-comment">#############################################################</span></span><span class="hljs-meta">#</span><span class="bash"> Camera config directory</span><span class="hljs-meta">#</span><span class="bash"> Any files ending <span class="hljs-keyword">in</span> <span class="hljs-string">&#x27;.conf&#x27;</span> <span class="hljs-keyword">in</span> this directory will be <span class="hljs-built_in">read</span></span><span class="hljs-meta">#</span><span class="bash"> as a camera config file.</span><span class="hljs-meta">#</span><span class="bash"><span class="hljs-comment">#############################################################</span></span>; camera_dir /etc/motion/conf.d</code></pre><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><section class="footnotes"><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span><a href="https://www.jb51.net/article/163690.htm">树莓派使用USB摄像头和motion实现监控</a><a href="#fnref:1" rev="footnote" class="footnote-backref"> ↩</a></span></span></li><li><span id="fn:2" class="footnote-text"><span><a href="https://blog.csdn.net/weixin_30509393/article/details/99396622?utm_medium=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-2.nonecase&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-2.nonecase">linux下的开源移动图像监测程序—motion编译与配置</a><a href="#fnref:2" rev="footnote" class="footnote-backref"> ↩</a></span></span></li><li><span id="fn:3" class="footnote-text"><span><a href="http://lavrsen.dk/foswiki/bin/view/Motion/ConfigFileOptions">（看不懂qwqの）Motion官方配置文件</a><a href="#fnref:3" rev="footnote" class="footnote-backref"> ↩</a></span></span></li><li><span id="fn:4" class="footnote-text"><span><a href="https://blog.csdn.net/u013162035/article/details/78580486">第6章 树莓派摄像头操作</a><a href="#fnref:4" rev="footnote" class="footnote-backref"> ↩</a></span></span></li></ol></div></section>]]></content>
    
    
    <categories>
      
      <category>学习</category>
      
      <category>raspberry</category>
      
    </categories>
    
    
    <tags>
      
      <tag>raspberry</tag>
      
      <tag>基地2.0</tag>
      
      <tag>实时</tag>
      
      <tag>监控</tag>
      
      <tag>网页</tag>
      
      <tag>树莓派</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>玩转树莓派[05:私有云搭建]</title>
    <link href="/2020/07/12/%E7%8E%A9%E8%BD%AC%E6%A0%91%E8%8E%93%E6%B4%BE%5B05%E7%A7%81%E6%9C%89%E4%BA%91%E6%90%AD%E5%BB%BA%5D/"/>
    <url>/2020/07/12/%E7%8E%A9%E8%BD%AC%E6%A0%91%E8%8E%93%E6%B4%BE%5B05%E7%A7%81%E6%9C%89%E4%BA%91%E6%90%AD%E5%BB%BA%5D/</url>
    
    <content type="html"><![CDATA[<p><span class="label label-primary"><br>  之前已经做过关于树莓派的私有云搭建，只不过都是在宝塔直接完成的，在宝塔搭建固然容易，但是宝塔作为虚拟机，储存的东西只是虚拟内存，无法实现本机的访问，现在在本地搭建的Nginx上搭建一下私有云。</span></p><h3 id="一-owncloud"><a href="#一-owncloud" class="headerlink" title="一.owncloud"></a>一.owncloud</h3><p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/20201122210506.jpg" alt=""></p><h4 id="1-下载ownCloud"><a href="#1-下载ownCloud" class="headerlink" title="1. 下载ownCloud"></a>1. 下载ownCloud</h4><p>按照下面的指令依次执行</p><pre><code class="hljs shell">sudo wget https://download.owncloud.org/community/owncloud-10.2.0.zipsudo unzip owncloud-10.2.0.zip -d /var/www/html/cd /var/www/html/owncloudsudo mkdir data</code></pre><h4 id="2-修改目录权限"><a href="#2-修改目录权限" class="headerlink" title="2. 修改目录权限"></a>2. 修改目录权限</h4><p><span class="label label-primary"><br>  OwnCloud在安装的过程中需要对一些目录有写的权限,为此，web服务器用户（www-data对于基于Debian的系统）必须要拥有apps、data、config目录的权限。</span></p><pre><code class="hljs shell">依次执行下面的指令sudo chown -R www-data:www-data datasudo chown -R www-data:www-data configsudo chown -R www-data:www-data apps</code></pre><h4 id="3-设置mysql账户密码"><a href="#3-设置mysql账户密码" class="headerlink" title="3. 设置mysql账户密码"></a>3. 设置mysql账户密码</h4><p>输入下面指令</p><pre><code class="hljs shell">sudo mysql -u root -p</code></pre><p>然后随便输密码点击回车就能登录进去</p><p>输入下面指令点击回车</p><pre><code class="hljs shell">update mysql.user set plugin=&#x27;mysql_native_password&#x27;;</code></pre><p>输入下面指令在newpassword处输入你想设置的密码</p><pre><code class="hljs shell">update mysql.user set password=PASSWORD(&quot;newpassword&quot;) where User=&#x27;root&#x27;;</code></pre><p>用下面指令刷新信息</p><pre><code class="hljs shell">flush privileges;</code></pre><p>刷新以后点击ctrl-c退出</p><h4 id="4-配置owncloud"><a href="#4-配置owncloud" class="headerlink" title="4. 配置owncloud"></a>4. 配置owncloud</h4><p>打开浏览器，输入 树莓派IP/owncloud ,进入设置安装界面</p><h4 id="5-问题"><a href="#5-问题" class="headerlink" title="5. 问题"></a>5. 问题</h4><pre><code class="hljs shell">error:This version of ownCloud is not compatible with PHP 7.3You are currently running PHP 7.3.19-1~deb10u1.</code></pre><p>解决方案：（呃，解决不了）<br><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/20201122210801.png" alt=""></p><h4 id="二-nextcloud"><a href="#二-nextcloud" class="headerlink" title="二.nextcloud"></a>二.nextcloud</h4><p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/20201122210845.jpg" alt=""></p><h4 id="1-下载nextcloud"><a href="#1-下载nextcloud" class="headerlink" title="1. 下载nextcloud"></a>1. 下载nextcloud</h4><p>按照下面的指令依次执行</p><pre><code class="hljs shell">sudo wget https://download.nextcloud.com/server/releases/nextcloud-19.0.0.zipsudo unzip nextcloud-19.0.0.zip -d /var/www/html/cd /var/www/html/nextcloudsudo mkdir data</code></pre><h4 id="2-修改目录权限-1"><a href="#2-修改目录权限-1" class="headerlink" title="2. 修改目录权限"></a>2. 修改目录权限</h4><p><span class="label label-primary"><br>  nextcloud在安装的过程中需要对一些目录有写的权限,为此，web服务器用户（www-data对于基于Debian的系统）必须要拥有apps、data、config目录的权限。</span></p><pre><code class="hljs shell">依次执行下面的指令sudo chown -R www-data:www-data datasudo chown -R www-data:www-data configsudo chown -R www-data:www-data apps</code></pre><h4 id="3-为nextcloud创建数据库"><a href="#3-为nextcloud创建数据库" class="headerlink" title="3. 为nextcloud创建数据库"></a>3. 为nextcloud创建数据库</h4><p>进入phpmyadmin页面</p><p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/20201122211024.png" alt=""></p><h4 id="4-配置nextcloud"><a href="#4-配置nextcloud" class="headerlink" title="4. 配置nextcloud"></a>4. 配置nextcloud</h4><p>打开浏览器，输入 树莓派IP/nextcloud ,进入设置安装界面</p><p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/20201122211108.png" alt=""></p><h4 id="5-问题-1"><a href="#5-问题-1" class="headerlink" title="5. 问题"></a>5. 问题</h4><p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/20201122211153.png" alt=""></p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><section class="footnotes"><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span><a href="https://mp.weixin.qq.com/s/IKMIYHsRsvVzoaBF89byBw">树莓派爱好者基地：树莓派搭建私有云盘教程</a><a href="#fnref:1" rev="footnote" class="footnote-backref"> ↩</a></span></span></li><li><span id="fn:2" class="footnote-text"><span><a href="https://central.owncloud.org/t/this-version-of-owncloud-is-not-compatible-with-php-7-3/17531">This version of ownCloud is not compatible with PHP 7.3</a><a href="#fnref:2" rev="footnote" class="footnote-backref"> ↩</a></span></span></li><li><span id="fn:3" class="footnote-text"><span><a href="https://www.orgleaf.com/2891.html?replytocom=2711">解决CentOS中安装Nextcloud出现“内部服务器错误</a><a href="#fnref:3" rev="footnote" class="footnote-backref"> ↩</a></span></span></li></ol></div></section>]]></content>
    
    
    <categories>
      
      <category>学习</category>
      
      <category>raspberry</category>
      
    </categories>
    
    
    <tags>
      
      <tag>raspberry</tag>
      
      <tag>私有云</tag>
      
      <tag>nextcloud</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>玩转树莓派[04pi-dashboard实时监控]</title>
    <link href="/2020/07/11/%E7%8E%A9%E8%BD%AC%E6%A0%91%E8%8E%93%E6%B4%BE%5B04pi-dashboard%E5%AE%9E%E6%97%B6%E7%9B%91%E6%8E%A7%5D/"/>
    <url>/2020/07/11/%E7%8E%A9%E8%BD%AC%E6%A0%91%E8%8E%93%E6%B4%BE%5B04pi-dashboard%E5%AE%9E%E6%97%B6%E7%9B%91%E6%8E%A7%5D/</url>
    
    <content type="html"><![CDATA[<h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p><span class="label label-primary"><br>  树莓派作为一台Linux主机，要是有一个可视化界面能实时显示树莓派的状态信息那该有多棒啊。<br>  最近找到一个有趣的项目，我们只需要给树莓派配置好lnmp环境后，就可以装上一个类似于仪表盘的状态监控的工具。<br>  通过炫酷的WebUI的界面显示当前树莓派的各种数据：<br>  CPU的基本信息，状态和使用率树莓派当前IP地址、使用的时间、操作系统内存、缓存、SWAP分区的实时数据TF卡磁盘的占用情况网络接口实时数据</span></p><p>以下是在树莓派上安装pi-dashboard的详细过程：</p><h4 id="安装方法"><a href="#安装方法" class="headerlink" title="安装方法"></a>安装方法</h4><h5 id="1-安装Nginx"><a href="#1-安装Nginx" class="headerlink" title="1. 安装Nginx"></a>1. 安装Nginx</h5><p>ssh登录树莓派，输入：</p><pre><code class="hljs shell">sudo apt-get updatesudo apt-get install nginx</code></pre><h5 id="2-安装php"><a href="#2-安装php" class="headerlink" title="2. 安装php"></a>2. 安装php</h5><pre><code class="hljs shell">sudo apt-get install php7.3-fpm</code></pre><h5 id="3-配置Nginx"><a href="#3-配置Nginx" class="headerlink" title="3. 配置Nginx"></a>3. 配置Nginx</h5><p>安装好Nginx后，为了让Nginx能够处理PHP网页，需要修改/etc/nginx/sites-available/default文件</p><pre><code class="hljs shell">sudo vim /etc/nginx/sites-available/default</code></pre><p>将default文件修改为以下内容：</p><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> Default server configuration</span><span class="hljs-meta">#</span>server &#123;        listen 80 default_server;        listen [::]:80 default_server;        root /var/www/html;        # Add index.php to the list if you are using PHP        index index.html index.htm index.nginx-debian.html index.php;        server_name _;        location / &#123;                # First attempt to serve request as file, then                # as directory, then fall back to displaying a 404.                try_files $uri $uri/ =404;        &#125;        # pass PHP scripts to FastCGI server        #        location ~ \.php$ &#123;        #       include snippets/fastcgi-php.conf;        #        #       # With php-fpm (or other unix sockets):                fastcgi_pass unix:/run/php/php7.3-fpm.sock;        #       # With php-cgi (or other tcp sockets):        #       fastcgi_pass 127.0.0.1:9000;        # 设置脚本文件请求的路径                fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;        # 引入fastcgi的配置文件                include fastcgi_params;        &#125;&#125;</code></pre><h5 id="4-重启Nginx"><a href="#4-重启Nginx" class="headerlink" title="4. 重启Nginx"></a>4. 重启Nginx</h5><pre><code class="hljs shell">sudo nginx -s reload</code></pre><p>这时我们可以查看Nginx与PHP是否配置成功，我们可以在网站根目录下 /var/www/html创建一个index.php文件，内容如下：</p><pre><code class="hljs shell">&lt;?php phpinfo(); ?&gt;</code></pre><p>保存后退出，在局域网下浏览器地址栏输入：<a href="http://你的树莓派ip/index.php，查看PHPinfo信息，如果显示说明PHP与Nginx配置成功。">http://你的树莓派ip/index.php，查看PHPinfo信息，如果显示说明PHP与Nginx配置成功。</a></p><h5 id="5-树莓派安装MariaDB和phpMyAdmin"><a href="#5-树莓派安装MariaDB和phpMyAdmin" class="headerlink" title="5. 树莓派安装MariaDB和phpMyAdmin"></a>5. 树莓派安装MariaDB和phpMyAdmin</h5><pre><code class="hljs shell">sudo apt-get install mariadb-server-10.3 phpmyadmin</code></pre><pre><code class="hljs shell">error:pi@raspbian:~$ sudo apt-get install mariadb-server-10.3 phpmyadminReading package lists... DoneBuilding dependency tree       Reading state information... DoneSome packages could not be installed. This may mean that you haverequested an impossible situation or if you are using the unstabledistribution that some required packages have not yet been createdor been moved out of Incoming.The following information may help to resolve the situation:The following packages have unmet dependencies: phpmyadmin : Depends: php-twig (&gt;= 2.9) but 2.6.2-2 is to be installed              Recommends: php-curl              Recommends: php-gd              Recommends: php-bz2              Recommends: php-zip              Recommends: php-tcpdf but it is not going to be installedE: Unable to correct problems, you have held broken packages.</code></pre><p>解决办法：</p><pre><code class="hljs shell">sudo apt-get install aptitudesudo aptitude install xxxxx第一选项no第二个选项yes</code></pre><p>控制台安装phpMyAdmin过程中会出现配置phpMyAdmin的选项<br><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/20201122205629.png" alt=""><br>它让我们自动重新配置网络服务器Apache或者lighttpd，因为我们用的是Nginx所以按 esc键取消选择，安装结束时会出现一个配置选项，点击 yes进行配置，之后要求输入一个密码，注册到MySQL服务器上<br><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/20201122205634.png" alt=""></p><h5 id="6-建立软链接："><a href="#6-建立软链接：" class="headerlink" title="6. 建立软链接："></a>6. 建立软链接：</h5><pre><code class="hljs shell">sudo ln -s /usr/share/phpmyadmin /var/www/html</code></pre><h5 id="7-pi-dashboard项目部署"><a href="#7-pi-dashboard项目部署" class="headerlink" title="7.pi-dashboard项目部署"></a>7.pi-dashboard项目部署</h5><p>我们先在本地下载pi-dashboard项目，下载地址：<a href="https://github.com/spoonysonny/pi">https://github.com/spoonysonny/pi</a><br>解压后用xftp软件传送到树莓派上，然后运行命令</p><pre><code class="hljs shell">sudo mv pi-dashboard /var/www/html</code></pre><h6 id="8-重启后浏览器输入http-你的树莓派ip-pi-dashboard"><a href="#8-重启后浏览器输入http-你的树莓派ip-pi-dashboard" class="headerlink" title="8.重启后浏览器输入http://你的树莓派ip/pi-dashboard/"></a>8.重启后浏览器输入<a href="http://你的树莓派ip/pi-dashboard/">http://你的树莓派ip/pi-dashboard/</a></h6><p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/20201122205117.png" alt=""></p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><section class="footnotes"><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span><a href="https://gitee.com/openfans-community/Debian-Pi-Aarch64/">Debian-Pi-Aarch64 ★ 全新树莓派64位系统2.0正式版 - 说明文档</a><a href="#fnref:1" rev="footnote" class="footnote-backref"> ↩</a></span></span></li><li><span id="fn:2" class="footnote-text"><span><a href="https://raspberrypi.club/">树莓派俱乐部</a><a href="#fnref:2" rev="footnote" class="footnote-backref"> ↩</a></span></span></li><li><span id="fn:3" class="footnote-text"><span><a href="https://shumeipai.nxez.com/">树莓派实验</a><a href="#fnref:3" rev="footnote" class="footnote-backref"> ↩</a></span></span></li><li><span id="fn:4" class="footnote-text"><span><a href="https://mp.weixin.qq.com/s/h--AL0TiA-2J551Vn0A3Ow">小雨编程</a><a href="#fnref:4" rev="footnote" class="footnote-backref"> ↩</a></span></span></li><li><span id="fn:5" class="footnote-text"><span><a href="https://blog.csdn.net/qiqzhang/article/details/87862556">ubuntu安装软件时出现The following packages have unmet dependencies，有依赖关系</a><a href="#fnref:5" rev="footnote" class="footnote-backref"> ↩</a></span></span></li></ol></div></section>]]></content>
    
    
    <categories>
      
      <category>学习</category>
      
      <category>raspberry</category>
      
    </categories>
    
    
    <tags>
      
      <tag>raspberry</tag>
      
      <tag>基地2.0</tag>
      
      <tag>系统</tag>
      
      <tag>mariadb</tag>
      
      <tag>myadmin</tag>
      
      <tag>mysql mysql</tag>
      
      <tag>nginx nginx</tag>
      
      <tag>php</tag>
      
      <tag>pi-dashboard</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>玩转树莓派[03安装宝塔]</title>
    <link href="/2020/07/10/%E7%8E%A9%E8%BD%AC%E6%A0%91%E8%8E%93%E6%B4%BE%5B03%E5%AE%89%E8%A3%85%E5%AE%9D%E5%A1%94%5D/"/>
    <url>/2020/07/10/%E7%8E%A9%E8%BD%AC%E6%A0%91%E8%8E%93%E6%B4%BE%5B03%E5%AE%89%E8%A3%85%E5%AE%9D%E5%A1%94%5D/</url>
    
    <content type="html"><![CDATA[<h4 id="1-下载宝塔虚拟机镜像，通过xftp上传到树莓派"><a href="#1-下载宝塔虚拟机镜像，通过xftp上传到树莓派" class="headerlink" title="1.下载宝塔虚拟机镜像，通过xftp上传到树莓派"></a>1.下载宝塔虚拟机镜像，通过xftp上传到树莓派</h4><h4 id="2-下载解压支持"><a href="#2-下载解压支持" class="headerlink" title="2.下载解压支持"></a>2.下载解压支持</h4><pre><code class="hljs shell">sudo apt updatesudo apt install tar gzip zip unzip bzip2 xz-utils -y</code></pre><h4 id="3-解压压缩包"><a href="#3-解压压缩包" class="headerlink" title="3. 解压压缩包"></a>3. 解压压缩包</h4><pre><code class="hljs shell">tar xvf bt-panel_vm_5.9.1_pro_v2.tar</code></pre><h4 id="4-进入文件目录"><a href="#4-进入文件目录" class="headerlink" title="4. 进入文件目录"></a>4. 进入文件目录</h4><pre><code class="hljs shell">cd ./bt-panel_vm_5.9.1_pro_v2</code></pre><h4 id="5-安装宝塔虚拟机"><a href="#5-安装宝塔虚拟机" class="headerlink" title="5.安装宝塔虚拟机"></a>5.安装宝塔虚拟机</h4><pre><code class="hljs shell">sudo ./install</code></pre><h4 id="6-启动宝塔虚拟机"><a href="#6-启动宝塔虚拟机" class="headerlink" title="6. 启动宝塔虚拟机"></a>6. 启动宝塔虚拟机</h4><pre><code class="hljs shell">sudo ./bt_run</code></pre><h4 id="7-关闭宝塔虚拟机："><a href="#7-关闭宝塔虚拟机：" class="headerlink" title="7.关闭宝塔虚拟机："></a>7.关闭宝塔虚拟机：</h4><p><span class="label label-primary"><br>为了保证虚拟机的数据同步安全，请按照以下步骤操作：<br>请ssh登录到虚拟机再执行命令 “ init 0 “ 关闭虚拟机<br>关闭后，需要在宝塔虚拟机目录下执行 “ ./bt_prog “ 命令，检查虚拟机是否已关闭<br>如果没有任何输出结果，代表虚拟机已正常关闭<br>如果无法正常关闭虚拟机，请在宝塔虚拟机目录下执行 “ ./bt_prog kill “ 命令<br>同样记得再次执行 “ ./bt_prog “ 命令，检查虚拟机是否已关闭<br>自动启动</span></p><h4 id="8-开机自动启动"><a href="#8-开机自动启动" class="headerlink" title="8.开机自动启动"></a>8.开机自动启动</h4><pre><code class="hljs shell">启用开机自动启动./install int</code></pre><pre><code class="hljs shell">取消开机自动启动./install uint</code></pre><h4 id="9-默认参数值"><a href="#9-默认参数值" class="headerlink" title="9.默认参数值:"></a>9.默认参数值:</h4><pre><code class="hljs shell">默认管理端口  28888默认管理地址  http://你树莓派的IP地址:28888/默认Web管理用户及密码    openfans/openfans宝塔虚拟机ssh端口  2222宝塔虚拟机root默认密码   raspberry</code></pre><h4 id="10-如何ssh连接到宝塔虚拟机"><a href="#10-如何ssh连接到宝塔虚拟机" class="headerlink" title="10.如何ssh连接到宝塔虚拟机?"></a>10.如何ssh连接到宝塔虚拟机?</h4><pre><code class="hljs shell">本机连接： ssh -p 2222 root@localhost外部连接： ssh -p 2222 root@你树莓派的IP地址</code></pre><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><section class="footnotes"><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span><a href="https://gitee.com/openfans-community/Debian-Pi-Aarch64/">Debian-Pi-Aarch64 ★ 全新树莓派64位系统2.0正式版 - 说明文档</a><a href="#fnref:1" rev="footnote" class="footnote-backref"> ↩</a></span></span></li><li><span id="fn:2" class="footnote-text"><span><a href="https://raspberrypi.club/">树莓派俱乐部</a><a href="#fnref:2" rev="footnote" class="footnote-backref"> ↩</a></span></span></li><li><span id="fn:3" class="footnote-text"><span><a href="https://shumeipai.nxez.com/">树莓派实验</a><a href="#fnref:3" rev="footnote" class="footnote-backref"> ↩</a></span></span></li></ol></div></section>]]></content>
    
    
    <categories>
      
      <category>学习</category>
      
      <category>raspberry</category>
      
    </categories>
    
    
    <tags>
      
      <tag>raspberry</tag>
      
      <tag>基地2.0</tag>
      
      <tag>宝塔</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>玩转树莓派[02:树莓派+u盘搭建家庭共享]</title>
    <link href="/2020/07/09/%E7%8E%A9%E8%BD%AC%E6%A0%91%E8%8E%93%E6%B4%BE%5B02%E6%A0%91%E8%8E%93%E6%B4%BE+u%E7%9B%98%E6%90%AD%E5%BB%BA%E5%AE%B6%E5%BA%AD%E5%85%B1%E4%BA%AB%5D/"/>
    <url>/2020/07/09/%E7%8E%A9%E8%BD%AC%E6%A0%91%E8%8E%93%E6%B4%BE%5B02%E6%A0%91%E8%8E%93%E6%B4%BE+u%E7%9B%98%E6%90%AD%E5%BB%BA%E5%AE%B6%E5%BA%AD%E5%85%B1%E4%BA%AB%5D/</url>
    
    <content type="html"><![CDATA[<h4 id="1-硬盘挂载"><a href="#1-硬盘挂载" class="headerlink" title="1.硬盘挂载"></a>1.硬盘挂载</h4><h5 id="1-1-使用fdisk-l-查看硬盘的详细信息"><a href="#1-1-使用fdisk-l-查看硬盘的详细信息" class="headerlink" title="1.1 使用fdisk -l 查看硬盘的详细信息"></a>1.1 使用fdisk -l 查看硬盘的详细信息</h5><pre><code class="hljs shell">pi@raspbian:~$ sudo fdisk -lDisk /dev/ram0: 4 MiB, 4194304 bytes, 8192 sectorsUnits: sectors of 1 * 512 = 512 bytesSector size (logical/physical): 512 bytes / 4096 bytesI/O size (minimum/optimal): 4096 bytes / 4096 bytesDisk /dev/ram1: 4 MiB, 4194304 bytes, 8192 sectorsUnits: sectors of 1 * 512 = 512 bytesSector size (logical/physical): 512 bytes / 4096 bytesI/O size (minimum/optimal): 4096 bytes / 4096 bytesDisk /dev/ram2: 4 MiB, 4194304 bytes, 8192 sectorsUnits: sectors of 1 * 512 = 512 bytesSector size (logical/physical): 512 bytes / 4096 bytesI/O size (minimum/optimal): 4096 bytes / 4096 bytesDisk /dev/ram3: 4 MiB, 4194304 bytes, 8192 sectorsUnits: sectors of 1 * 512 = 512 bytesSector size (logical/physical): 512 bytes / 4096 bytesI/O size (minimum/optimal): 4096 bytes / 4096 bytesDisk /dev/ram4: 4 MiB, 4194304 bytes, 8192 sectorsUnits: sectors of 1 * 512 = 512 bytesSector size (logical/physical): 512 bytes / 4096 bytesI/O size (minimum/optimal): 4096 bytes / 4096 bytesDisk /dev/ram5: 4 MiB, 4194304 bytes, 8192 sectorsUnits: sectors of 1 * 512 = 512 bytesSector size (logical/physical): 512 bytes / 4096 bytesI/O size (minimum/optimal): 4096 bytes / 4096 bytesDisk /dev/ram6: 4 MiB, 4194304 bytes, 8192 sectorsUnits: sectors of 1 * 512 = 512 bytesSector size (logical/physical): 512 bytes / 4096 bytesI/O size (minimum/optimal): 4096 bytes / 4096 bytesDisk /dev/ram7: 4 MiB, 4194304 bytes, 8192 sectorsUnits: sectors of 1 * 512 = 512 bytesSector size (logical/physical): 512 bytes / 4096 bytesI/O size (minimum/optimal): 4096 bytes / 4096 bytesDisk /dev/ram8: 4 MiB, 4194304 bytes, 8192 sectorsUnits: sectors of 1 * 512 = 512 bytesSector size (logical/physical): 512 bytes / 4096 bytesI/O size (minimum/optimal): 4096 bytes / 4096 bytesDisk /dev/ram9: 4 MiB, 4194304 bytes, 8192 sectorsUnits: sectors of 1 * 512 = 512 bytesSector size (logical/physical): 512 bytes / 4096 bytesI/O size (minimum/optimal): 4096 bytes / 4096 bytesDisk /dev/ram10: 4 MiB, 4194304 bytes, 8192 sectorsUnits: sectors of 1 * 512 = 512 bytesSector size (logical/physical): 512 bytes / 4096 bytesI/O size (minimum/optimal): 4096 bytes / 4096 bytesDisk /dev/ram11: 4 MiB, 4194304 bytes, 8192 sectorsUnits: sectors of 1 * 512 = 512 bytesSector size (logical/physical): 512 bytes / 4096 bytesI/O size (minimum/optimal): 4096 bytes / 4096 bytesDisk /dev/ram12: 4 MiB, 4194304 bytes, 8192 sectorsUnits: sectors of 1 * 512 = 512 bytesSector size (logical/physical): 512 bytes / 4096 bytesI/O size (minimum/optimal): 4096 bytes / 4096 bytesDisk /dev/ram13: 4 MiB, 4194304 bytes, 8192 sectorsUnits: sectors of 1 * 512 = 512 bytesSector size (logical/physical): 512 bytes / 4096 bytesI/O size (minimum/optimal): 4096 bytes / 4096 bytesDisk /dev/ram14: 4 MiB, 4194304 bytes, 8192 sectorsUnits: sectors of 1 * 512 = 512 bytesSector size (logical/physical): 512 bytes / 4096 bytesI/O size (minimum/optimal): 4096 bytes / 4096 bytesDisk /dev/ram15: 4 MiB, 4194304 bytes, 8192 sectorsUnits: sectors of 1 * 512 = 512 bytesSector size (logical/physical): 512 bytes / 4096 bytesI/O size (minimum/optimal): 4096 bytes / 4096 bytesDisk /dev/mmcblk0: 29.9 GiB, 32105299968 bytes, 62705664 sectorsUnits: sectors of 1 * 512 = 512 bytesSector size (logical/physical): 512 bytes / 512 bytesI/O size (minimum/optimal): 512 bytes / 512 bytesDisklabel type: dosDisk identifier: 0x68339ddaDevice         Boot  Start      End  Sectors  Size Id Type/dev/mmcblk0p1 *      8192   524287   516096  252M  c W95 FAT32 (LBA)/dev/mmcblk0p2      524288 62705663 62181376 29.7G 83 LinuxDisk /dev/sda: 30 GiB, 32212254720 bytes, 62914560 sectorsDisk model: U310Units: sectors of 1 * 512 = 512 bytesSector size (logical/physical): 512 bytes / 512 bytesI/O size (minimum/optimal): 512 bytes / 512 bytesDisklabel type: dosDisk identifier: 0xb64d29a8Device     Boot Start      End  Sectors Size Id Type/dev/sda1        8192 62914559 62906368  30G  7 HPFS/NTFS/exFAT</code></pre><h5 id="1-2-挂载到指定位置"><a href="#1-2-挂载到指定位置" class="headerlink" title="1.2 挂载到指定位置"></a>1.2 挂载到指定位置</h5><pre><code class="hljs shell">pi@raspbian:~$ mkdir sharepi@raspbian:~$ lssharepi@raspbian:~$ sudo mount /dev/sda1 share</code></pre><h5 id="1-3-查看挂载情况"><a href="#1-3-查看挂载情况" class="headerlink" title="1.3 查看挂载情况"></a>1.3 查看挂载情况</h5><pre><code class="hljs shell">df -h</code></pre><pre><code class="hljs shell">pi@raspbian:~$ df -hFilesystem      Size  Used Avail Use% Mounted on/dev/root        30G  4.2G   24G  15% /devtmpfs        918M     0  918M   0% /devtmpfs           950M     0  950M   0% /dev/shmtmpfs           950M  8.9M  941M   1% /runtmpfs           5.0M     0  5.0M   0% /run/locktmpfs           950M     0  950M   0% /sys/fs/cgroup/dev/mmcblk0p1  252M   71M  181M  29% /boottmpfs           190M     0  190M   0% /run/user/1000/dev/sda1        30G   19G  9.9G  65% /home/pi/share</code></pre><p class="note note-primary">  取消挂载 : sudo umount /dev/sda1</p><h5 id="1-4-解决硬盘的自动挂载"><a href="#1-4-解决硬盘的自动挂载" class="headerlink" title="1.4 解决硬盘的自动挂载"></a>1.4 解决硬盘的自动挂载</h5><p>每次树莓派重启或者硬盘插拔都需要对硬盘进行重新挂载，比较麻烦，因此需要自动挂载。这里要修改/etc/fstab文件。</p><p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/20201121203001.png" alt=""></p><p>可以看到，fstab文件其实就是一个表格，表格各列的含意如下：<br>第一列：磁盘分区名/卷标，一般是/dev/sdaN（N表示正整数）<br>第二列：挂载点，我们在这里把/dev/sda1挂到/samba上。<br>第三列：缺省设置，一般用defautls。<br>第四列：是否备份：0——表示不做 dump 备份；1——表示要将整个 fie sysytem 里的内容备份；2 也表示要做 dump 备份，但该分区的重要性比 1 小。<br>第五列：检测顺序：0——不进行检测；根分区（/），必须填写 1，其它的都不能填写 1。如果有分区填写大于 1 的话，则在检查完根分区后，从小到大依次检查下去。<br>具体填写方法在图中已注明。</p><h4 id="2-df-h查看盘符挂载情况"><a href="#2-df-h查看盘符挂载情况" class="headerlink" title="2.df -h查看盘符挂载情况"></a>2.df -h查看盘符挂载情况</h4><pre><code class="hljs shell">pi@raspbian:~$ df -hFilesystem      Size  Used Avail Use% Mounted onudev            788M     0  788M   0% /devtmpfs           185M   12M  173M   7% /run/dev/mmcblk0p2   30G  8.8G   20G  32% /tmpfs           925M     0  925M   0% /dev/shmtmpfs           5.0M  4.0K  5.0M   1% /run/locktmpfs           925M     0  925M   0% /sys/fs/cgroup/dev/mmcblk0p1  252M   89M  163M  36% /boottmpfs           185M   16K  185M   1% /run/user/1000/dev/sda        500G   28G  473G   6% /media/pi/AE57-581F</code></pre><h4 id="3-已知盘符已自动挂载在-home-pi-share文件夹下"><a href="#3-已知盘符已自动挂载在-home-pi-share文件夹下" class="headerlink" title="3.已知盘符已自动挂载在/home/pi/share文件夹下"></a>3.已知盘符已自动挂载在/home/pi/share文件夹下</h4><h4 id="4-安装samba"><a href="#4-安装samba" class="headerlink" title="4.安装samba"></a>4.安装samba</h4><p><span class="label label-primary">更新一下源 ：sudo apt-get update</span></p><p><span class="label label-primary">安装samba : sudo apt-get install samba samba-common-bin</span></p><h4 id="5-安装完成后，配置-etc-samba-smb-conf文件"><a href="#5-安装完成后，配置-etc-samba-smb-conf文件" class="headerlink" title="5.安装完成后，配置/etc/samba/smb.conf文件"></a>5.安装完成后，配置/etc/samba/smb.conf文件</h4><pre><code class="hljs shell">sudo vim /etc/samba/smb.conf</code></pre><p>&lt;span class=label label-primary”&gt;在其最后添加以下命令：&lt;/span&gt;</p><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash">共享文件的名称，将在网络上以此名称显示</span>path = /home/pi/share #共享文件的路径valid users = root pi #允许访问的用户，这里我用的是root 和 pi 两个用户browseable = yes  #允许浏览public = yes  #共享开放writable = yes  #可写</code></pre><h4 id="6-保存后，重启samba服务"><a href="#6-保存后，重启samba服务" class="headerlink" title="6.保存后，重启samba服务"></a>6.保存后，重启samba服务</h4><pre><code class="hljs shell">sudo /usr/sbin/samba restart</code></pre><p>(可通过 whereis samba 寻找 samba 所在位置)</p><h4 id="7-最后使用root用户添加共享用户："><a href="#7-最后使用root用户添加共享用户：" class="headerlink" title="7.最后使用root用户添加共享用户："></a>7.最后使用root用户添加共享用户：</h4><p>smbpasswd –a pi #这里我用的pi。</p><pre><code class="hljs shell">pi@raspbian:~$ sudo suroot@raspbian:/home/pi# smbpasswd -a piNew SMB password:Retype new SMB password:Added user pi</code></pre><h4 id="8-ok-完成"><a href="#8-ok-完成" class="headerlink" title="8.ok 完成"></a>8.ok 完成</h4><p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/20201121203707.png" alt=""></p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><section class="footnotes"><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span><a href="https://gitee.com/openfans-community/Debian-Pi-Aarch64/">Debian-Pi-Aarch64 ★ 全新树莓派64位系统2.0正式版 - 说明文档</a><a href="#fnref:1" rev="footnote" class="footnote-backref"> ↩</a></span></span></li><li><span id="fn:2" class="footnote-text"><span><a href="https://raspberrypi.club/">树莓派俱乐部</a><a href="#fnref:2" rev="footnote" class="footnote-backref"> ↩</a></span></span></li><li><span id="fn:3" class="footnote-text"><span><a href="https://shumeipai.nxez.com/">树莓派实验</a><a href="#fnref:3" rev="footnote" class="footnote-backref"> ↩</a></span></span></li></ol></div></section>]]></content>
    
    
    <categories>
      
      <category>学习</category>
      
      <category>raspberry</category>
      
    </categories>
    
    
    <tags>
      
      <tag>raspberry</tag>
      
      <tag>基地2.0</tag>
      
      <tag>samba</tag>
      
      <tag>家庭共享，U盘，挂载</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>玩转树莓派[01:装系统]</title>
    <link href="/2020/07/08/%E7%8E%A9%E8%BD%AC%E6%A0%91%E8%8E%93%E6%B4%BE%5B01%E8%A3%85%E7%B3%BB%E7%BB%9F%5D/"/>
    <url>/2020/07/08/%E7%8E%A9%E8%BD%AC%E6%A0%91%E8%8E%93%E6%B4%BE%5B01%E8%A3%85%E7%B3%BB%E7%BB%9F%5D/</url>
    
    <content type="html"><![CDATA[<h3 id="一-格式化以及烤录系统"><a href="#一-格式化以及烤录系统" class="headerlink" title="一.格式化以及烤录系统"></a>一.格式化以及烤录系统</h3><p class="note note-primary">  镜像选择：树莓派爱好者基地  2020-06-17-OPENFANS-Debian-Buster-Desktop-Aarch64-ext4-v2019-2.0-U3-Release.img.xz</p><h5 id="1-1格式化储存卡"><a href="#1-1格式化储存卡" class="headerlink" title="1.1格式化储存卡"></a>1.1格式化储存卡</h5><p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/20201121201303.png"  border="0" /></p><h5 id="1-2烤录镜像"><a href="#1-2烤录镜像" class="headerlink" title="1.2烤录镜像"></a>1.2烤录镜像</h5><p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/20201121201352.png"  border="0" /></p><h3 id="二-查看官方文档"><a href="#二-查看官方文档" class="headerlink" title="二.查看官方文档"></a>二.查看官方文档</h3><p><a class="wp-editor-md-post-content-link" href="https://gitee.com/openfans-community/Debian-Pi-Aarch64">https://gitee.com/openfans-community/Debian-Pi-Aarch64/</a></p><h4 id="2-1服务开关："><a href="#2-1服务开关：" class="headerlink" title="2.1服务开关："></a>2.1服务开关：</h4><h5 id="2-1-1-Docker容器"><a href="#2-1-1-Docker容器" class="headerlink" title="2.1.1 Docker容器"></a>2.1.1 Docker容器</h5><p><span class="label label-primary"><br>  手动开启：systemctl start docker.service<br>  手动停止：systemctl stop docker.service<br>  启用开机启动：systemctl enable docker.service<br>  禁用开机启动：systemctl disable docker.service</span></p><h5 id="2-1-2-CecOS-CaaS容器云（服务端口：8443）"><a href="#2-1-2-CecOS-CaaS容器云（服务端口：8443）" class="headerlink" title="2.1.2 CecOS CaaS容器云（服务端口：8443）"></a>2.1.2 CecOS CaaS容器云（服务端口：8443）</h5><p><span class="label label-primary"><br>  手动开启：systemctl start cecos-caas.service<br>  手动停止：systemctl stop cecos-caas.service<br>  启用开机启动：systemctl enable cecos-caas.service<br>  禁用开机启动：systemctl disable cecos-caas.service</span></p><h5 id="2-1-3-WebGUI管理平台（服务端口：9090"><a href="#2-1-3-WebGUI管理平台（服务端口：9090" class="headerlink" title="2.1.3 WebGUI管理平台（服务端口：9090)"></a>2.1.3 WebGUI管理平台（服务端口：9090)</h5><p><span class="label label-primary"><br>  手动开启：systemctl start cockpit.socket<br>  手动停止：systemctl stop cockpit.socket<br>  启用开机启动：systemctl enable cockpit.socket<br>  禁用开机启动：systemctl disable cockpit.socket</span></p><h5 id="2-1-4-Web-SSH客户端（服务端口：4200）"><a href="#2-1-4-Web-SSH客户端（服务端口：4200）" class="headerlink" title="2.1.4 Web SSH客户端（服务端口：4200）"></a>2.1.4 Web SSH客户端（服务端口：4200）</h5><p><span class="label label-primary"><br>  手动开启：systemctl start shellinabox.service<br>  手动停止：systemctl stop shellinabox.service<br>  启用开机启动：systemctl enable shellinabox.service<br>  禁用开机启动：systemctl disable shellinabox.service</span></p><h5 id="2-1-5-默认的VNC访问密码为-raspberry"><a href="#2-1-5-默认的VNC访问密码为-raspberry" class="headerlink" title="2.1.5 默认的VNC访问密码为: raspberry"></a>2.1.5 默认的VNC访问密码为: raspberry</h5><p><span class="label label-primary"><br>默认的WEB VNC访问地址为: <a href="http://你树莓派的IP地址:5901">http://你树莓派的IP地址:5901</a><br>默认的客户端访问地址为: 你树莓派的IP地址:5900</span></p><h4 id="2-2账户及密码"><a href="#2-2账户及密码" class="headerlink" title="2.2账户及密码"></a>2.2账户及密码</h4><p><span class="label label-primary"><br>  系统默认账户：pi ，默认密码：raspberry<br>  默认账户pi账户支持ssh登录，root账户密码请登陆后使用命令 “sudo passwd root” 执行设置，<br>  或使用命令 “sudo -i” 来切换到root用户。</span></p><h4 id="2-3Web登录接口说明"><a href="#2-3Web登录接口说明" class="headerlink" title="2.3Web登录接口说明"></a>2.3Web登录接口说明</h4><h5 id="2-3-1-Web可视化管理界面"><a href="#2-3-1-Web可视化管理界面" class="headerlink" title="2.3.1 Web可视化管理界面"></a>2.3.1 Web可视化管理界面</h5><p><span class="label label-primary"><br>登录地址 <a href="https://你树莓派的IP地址:9090">https://你树莓派的IP地址:9090</a><br>说明：请使用系统默认账户pi登录</span></p><h5 id="2-3-2-WEB-SSH-客户端-入口界面"><a href="#2-3-2-WEB-SSH-客户端-入口界面" class="headerlink" title="2.3.2 WEB SSH 客户端 入口界面"></a>2.3.2 WEB SSH 客户端 入口界面</h5><p><span class="label label-primary"><br>登录地址 <a href="https://你树莓派的IP地址:4200">https://你树莓派的IP地址:4200</a><br>说明：使用具有控制台登录权限的帐户登录，例如：pi</span></p><h5 id="2-3-3-CecOS-CaaS-容器云管理平台-登录界面"><a href="#2-3-3-CecOS-CaaS-容器云管理平台-登录界面" class="headerlink" title="2.3.3 CecOS CaaS 容器云管理平台 登录界面"></a>2.3.3 CecOS CaaS 容器云管理平台 登录界面</h5><p><span class="label label-primary"><br>登录地址 <a href="https://你树莓派的IP地址:8443">https://你树莓派的IP地址:8443</a><br>说明：默认管理账户 admin , 默认密码：password 。请登录后立即修改默认密码！！</span></p><h4 id="2-4启用和运行Docker服务"><a href="#2-4启用和运行Docker服务" class="headerlink" title="2.4启用和运行Docker服务"></a>2.4启用和运行Docker服务</h4><p><span class="label label-primary"><br>  启用 Docker服务，需要手动启动。<br>  开机自动启动Docker服务<br>  systemctl enable docker.service<br>  启动Docker服务<br>  systemctl start docker.service<br>  停止Docker服务<br>  systemctl stop docker.service<br>  禁止Docker服务开机启动<br>  systemctl disable docker.service</span></p><h4 id="2-5启用CecOS-CaaS容器云"><a href="#2-5启用CecOS-CaaS容器云" class="headerlink" title="2.5启用CecOS-CaaS容器云"></a>2.5启用CecOS-CaaS容器云</h4><p><span class="label label-primary"><br>  默认没有启用 CecOS CaaS容器云 服务，需要手动启动。<br>  注意：要启用CecOS CaaS容器云服务，必须要先启用和启动docker服务！！<br>  开机自动启动 CecOS CaaS容器云 服务<br>  systemctl enable cecos-caas.service<br>  启动 CecOS CaaS容器云 服务<br>  systemctl start cecos-caas.service<br>  停止 CecOS CaaS容器云 服务<br>  systemctl stop cecos-caas.service<br>  禁止 CecOS CaaS容器云 服务开机启动<br>  systemctl disable cecos-caas.service</span></p><h4 id="2-6启用和退出Docker集群"><a href="#2-6启用和退出Docker集群" class="headerlink" title="2.6启用和退出Docker集群"></a>2.6启用和退出Docker集群</h4><p><span class="label label-primary"><br>  初始化并加入一个 Docker Swarm集群<br>  docker swarm init</p><h1 id="查看集群节点状态"><a href="#查看集群节点状态" class="headerlink" title="查看集群节点状态"></a>查看集群节点状态</h1><p>  docker node ls</p><h1 id="退出Docker-Swarm集群"><a href="#退出Docker-Swarm集群" class="headerlink" title="退出Docker Swarm集群"></a>退出Docker Swarm集群</h1><p>  docker swarm leave —force<br>&lt;/span&gt;</p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><section class="footnotes"><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span><a href="https://gitee.com/openfans-community/Debian-Pi-Aarch64/">Debian-Pi-Aarch64 ★ 全新树莓派64位系统2.0正式版 - 说明文档</a><a href="#fnref:1" rev="footnote" class="footnote-backref"> ↩</a></span></span></li><li><span id="fn:2" class="footnote-text"><span><a href="https://raspberrypi.club/">树莓派俱乐部</a><a href="#fnref:2" rev="footnote" class="footnote-backref"> ↩</a></span></span></li><li><span id="fn:3" class="footnote-text"><span><a href="https://shumeipai.nxez.com/">树莓派实验</a><a href="#fnref:3" rev="footnote" class="footnote-backref"> ↩</a></span></span></li></ol></div></section>]]></content>
    
    
    <categories>
      
      <category>学习</category>
      
      <category>raspberry</category>
      
    </categories>
    
    
    <tags>
      
      <tag>raspberry</tag>
      
      <tag>基地2.0</tag>
      
      <tag>系统</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>测试文档</title>
    <link href="/2019/11/11/%E6%B5%8B%E8%AF%95%E6%96%87%E6%A1%A3/"/>
    <url>/2019/11/11/%E6%B5%8B%E8%AF%95%E6%96%87%E6%A1%A3/</url>
    
    <content type="html"><![CDATA[<p>正文</p><p class="note note-primary">标签</p><pre><code class="hljs markdown"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;note note-primary&quot;</span>&gt;</span></span>标签<span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span></code></pre><p><span class="label label-primary">Label</span></p><pre><code class="hljs markdown"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;label label-primary&quot;</span>&gt;</span></span>Label<span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span></code></pre>            <input type="checkbox" disabled checked="checked">text          <pre><code class="hljs markdown">&#123;% cb text, checked?, incline? %&#125;</code></pre><p><a class="btn" href="url" title="title">text</a></p><pre><code class="hljs markdown"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;btn&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;url&quot;</span> <span class="hljs-attr">title</span>=<span class="hljs-string">&quot;title&quot;</span>&gt;</span></span>text<span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span></span></code></pre><p>$\lim_{x \to \infty} \frac{1}{n(n+1)}$</p><p>$\Gamma$</p><pre><code class="hljs markdown">\lim<span class="hljs-emphasis">_&#123;x \to \infty&#125; \frac&#123;1&#125;&#123;n(n+1)&#125;</span></code></pre><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><pre><code class="hljs markdown">[<span class="hljs-symbol">^2</span>]: <span class="hljs-link">参考资料2</span></code></pre><section class="footnotes"><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span>参考资料1<a href="#fnref:1" rev="footnote" class="footnote-backref"> ↩</a></span></span></li><li><span id="fn:2" class="footnote-text"><span>参考资料2<a href="#fnref:2" rev="footnote" class="footnote-backref"> ↩</a></span></span></li></ol></div></section>]]></content>
    
    
    <categories>
      
      <category>学习</category>
      
      <category>Linux</category>
      
      <category>raspberry</category>
      
      <category>数学建模</category>
      
      <category>python</category>
      
      <category>docker</category>
      
      <category>git</category>
      
      <category>life</category>
      
      <category>杂谈</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Hexo</tag>
      
      <tag>Fluid</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
